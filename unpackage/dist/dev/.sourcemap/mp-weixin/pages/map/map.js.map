{"version":3,"sources":["webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?602f","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?b8dc","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?5b1e","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?8294","uni-app:///pages/map/map.vue","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?fd3a","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/map/map.vue?5338","uni-app:///main.js"],"names":["createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACqC;;;AAGvF;AAC+M;AAC/M,gBAAgB,uNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sQAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAA+yB,CAAgB,+zBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqEn0B;;;AAGA,qK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2qBACA,EACA,iCADA,EACA;AACA,MAFA,kBAEA,CACA,SACA,cACA,UADA,EAEA,WAFA,CAEA;AAFA,OADA,EAKA,YACA,SACA,SADA,EAEA,WAFA,EAGA,UAHA,EADA,EALA,EAYA,yBAZA,EAaA,aAbA,EAcA,qBAdA,EAeA,UAfA,EAgBA,mBAhBA,EAiBA,qBAjBA,EAkBA,mBAlBA,EAmBA,WAnBA,EAoBA,gBApBA,EAqBA,eArBA,EAsBA,YAtBA,EAuBA,cAvBA,EAwBA,YAxBA,EAyBA,qBAzBA,EA0BA,mBA1BA,EA2BA,mBA3BA,EA4BA,mBA5BA,EA6BA,cA7BA,EA8BA,uBA9BA,EA+BA,iBA/BA,EAgCA,wCAhCA,EAiCA,mBAjCA,EAkCA,iBAlCA,EAmCA,wBAnCA,GAqCA,CAxCA,EAyCA,oBAzCA,EA0CA,YACA,IADA,kBACA,CACA,uBACA,CAHA,EA1CA,EA+CA,6BACA,qDACA,uBACA,uBACA,CAnDA,EAoDA,WACA,uBACA,0BACA,0EACA,CAJA,EAKA,kCACA,iBACA,yBADA,IAGA,CATA,EAUA,oEACA,0CACA,sEACA,wBACA,oBADA;AAKA,2DALA,CAGA,eAHA,yBAGA,eAHA,CAIA,eAJA,yBAIA,eAJA;AAMA;AACA;AACA;AACA,OAVA;AAWA,KAvBA;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KA/BA;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KAvCA;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAxDA;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA,KA/DA;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA,kBALA,CAEA,YAFA,aAEA,WAFA,CAGA,IAHA,aAGA,IAHA,CAIA,KAJA,aAIA,KAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAdA;AAeA,KAvFA;AAwFA;AACA;AACA;AACA;AACA;AACA,WAHA;;AAKA,OANA;AAOA;AACA;AACA,OAFA;AAGA,KAnGA;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KA9GA;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxHA;AAyHA;AACA;AACA,KA3HA;AA4HA;AACA;AACA,KA9HA;AA+HA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,KAtIA;AAuIA;AACA;AACA,sJADA;;AAGA,KA3IA;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA;AACA;AACA,+BADA;AAEA,gCAFA;AAGA,4BAHA;AAIA,+BAJA;AAKA,0CALA;;AAOA,SAVA;;AAYA,KA7JA;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtKA;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9KA,EApDA;;AAoOA;AACA,kBADA;AAEA,oBAFA,EApOA,E;;;;;;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAA6qC,CAAgB,gqCAAG,EAAC,C;;;;;;;;;;;ACAjsC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL,wCAAmB;AACnB;AACA,sF;AACAA,UAAU,CAACC,YAAD,CAAV,C","file":"pages/map/map.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./map.vue?vue&type=template&id=0b31f540&scoped=true&\"\nvar renderjs\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./map.vue?vue&type=style&index=0&id=0b31f540&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b31f540\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/map/map.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./map.vue?vue&type=template&id=0b31f540&scoped=true&\"","var components = {\n  mescrollUni: function() {\n    return import(\n      /* webpackChunkName: \"components/mescroll-uni/mescroll-uni\" */ \"@/components/mescroll-uni/mescroll-uni.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./map.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<cu-custom :isBack=\"false\"></cu-custom>\r\n\t\t<map id=\"myMap\" ref=\"myMap\" style=\"width:100%;height:100vh\" :scale=\"scale\" :longitude=\"longitude\" :latitude=\"latitude\"\r\n\t\t :markers=\"markers\" @markertap=\"markertap\" @regionchange=\"regionchange\"></map>\r\n\t\t<view v-if=\"isShowDeviceList\" class=\"ztnCustom-background-color\" style=\"background: rgba(112, 200, 226,0.2);\">\r\n\t\t\t<view class=\"cu-bar bg-white solid-bottom\" :style=\"[{top:CustomBar + 'px'}]\">\r\n\t\t\t\t<view class=\"flex align-center justify-start margin\" style=\"white-space: nowrap\">\r\n\t\t\t\t\t<text>{{i18n.number}} : {{totalDeviceNum}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center justify-end margin flex-sub\" style=\"white-space: nowrap;\">\r\n\t\t\t\t\t<picker @change=\"productStatusChange\" :value=\"currentStatusIndex\" :range='i18n.map.productStatusList'>\r\n\t\t\t\t\t\t<view class=\"padding-right-sm\" :class=\"[currentStatusIndex != 0 ? 'text-bold text-lg text-grey':'text-grey']\">{{i18n.map.productStatusList[currentStatusIndex]}}</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t\t<view>|</view>\r\n\t\t\t\t\t<picker @change=\"productTypeChange\" :value=\"currentTypeIndex\" :range='productTypeList'>\r\n\t\t\t\t\t\t<view class=\"padding-left-sm\" :class=\"[currentTypeIndex != 0 ? 'text-bold text-lg text-grey':'text-grey']\">{{productTypeList[currentTypeIndex]}}</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"bg-white\" style=\"height:865upx;position:fixed;width:100%;bottom:0;z-index:998;border-top-left-radius:20rpx;border-top-right-radius:20rpx;\">\r\n\t\t\t\t\t<view class=\"padding-tb-xs text-center\" id=\"hideButton\" @tap=\"hideDeviceList\">\r\n\t\t\t\t\t\t<image class=\"ztnCustom-hideIcon\" :src=\"hideIcon\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<mescroll-uni ref=\"mescrollRef\" @init=\"mescrollInit\" height=\"800upx\" top=\"10\" :down=\"downOption\" @down=\"downCallback\"\r\n\t\t\t\t\t :up=\"upOption\" @up=\"markerGetDeviceList\">\r\n\t\t\t\t\t\t<view v-for=\"(arrItem,arrIndex) in deviceList\" :key=\"arrIndex\">\r\n\t\t\t\t\t\t\t<view v-for=\"(item,index) in arrItem\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<view :class=\"modalDeviceName == item.deviceName?'ztnCustom-move-cur':''\" class=\"flex align-center padding-tb solid-bottom ztnCustom-cur\"\r\n\t\t\t\t\t\t\t\t @touchstart=\"ListTouchStart\" @touchmove=\"ListTouchMove\" @touchend=\"ListTouchEnd\" :data-deviceName=\"item.deviceName\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"cu-avatar lg margin-lr\" :style=\"[{backgroundImage:`url(${item.deviceIcon})`}]\" style=\"background-color:rgba(0,0,0,0)\"></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"flex-sub\" @tap='deviceNavigation(item.deviceName,item.deviceCore,\"deviceInfo\")'>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"flex align-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"margin-bottom-xs text-cut text-lg text-bold\" style=\"width:42vw\">{{item.deviceName}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"flex align-center justify-center margin-bottom-xs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<surplus class=\"surplus\" id=\"surplus\" :surplus=\"item.surplus\"></surplus>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text :style=\"{color:item.statusColor}\" style=\"width:16vw\" class=\"text-center\">{{item.deviceStatu}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\" margin-bottom-xs\">{{item.deviceCore}}</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"text-cut text-gray\" style=\"width:75vw\">{{item.deviceAddr}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"ztnCustom-move\">\r\n\t\t\t\t\t\t\t\t\t\t<view class='bg-green light text-center view' @tap='deviceNavigation(item.deviceName,item.deviceCore,\"deviceController\")'>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-repairfill padding-right-xs text-xl\"></text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{i18n.map.controller}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class='bg-blue light text-center view' @tap='navigation(item)'>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-footprint padding-right-xs text-xl\"></text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{i18n.map.navigation}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</mescroll-uni>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!--  #ifdef H5 || MP-WEIXIN  -->\r\n\t\t<mapFav v-if=\"!isLogin\" class=\"ztnCustom-mapFav\" v-on:parentEvent=\"goToLogin\" :loginForMore=\"i18n.leadGotoLogin.loginForMore\"\r\n\t\t :immediateLoginText=\"i18n.leadGotoLogin.immediateLoginText\"></mapFav>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport MescrollMixin from '@/components/mescroll-uni/mescroll-mixins.js';\r\n\timport surplus from '@/components/ztn-custom/surplus/surplus.vue'\r\n\timport mapFav from '@/components/ztn-custom/mapFav/mapFav.vue'\r\n\timport * as deviceBelongApi from '@/common/utils/ztnUniAppApi/ztnRequestApi/deviceApi/deviceBelongApi/deviceBelongApi.js'\r\n\texport default {\r\n\t\tmixins: [MescrollMixin], // 使用mixin (在main.js注册全局组件)\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdownOption: {\r\n\t\t\t\t\tuse: false,\r\n\t\t\t\t\tauto: false, //是否在初始化后,自动执行downCallback; 默认true\r\n\t\t\t\t},\r\n\t\t\t\tupOption: {\r\n\t\t\t\t\tempty: {\r\n\t\t\t\t\t\tuse: true,\r\n\t\t\t\t\t\tfixed: true,\r\n\t\t\t\t\t\ttop: '10%'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tCustomBar: this.CustomBar,\r\n\t\t\t\tisLogin: true,\r\n\t\t\t\tisLoginOverdue: false,\r\n\t\t\t\tscale: 4.5,\r\n\t\t\t\tenlargeScale: false,\r\n\t\t\t\tlongitude: 114.324520,\r\n\t\t\t\tlatitude: 27.099994,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tmarkerId: Number,\r\n\t\t\t\tproductId: null,\r\n\t\t\t\tstatus: null,\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\tcurrentStatusIndex: 0,\r\n\t\t\t\tcurrentTypeIndex: 0,\r\n\t\t\t\tproductTypeList: [],\r\n\t\t\t\tproductTypeData: [],\r\n\t\t\t\tdeviceList: [],\r\n\t\t\t\tisShowDeviceList: false,\r\n\t\t\t\ttotalDeviceNum: 0,\r\n\t\t\t\thideIcon: '../../static/images/down.png',\r\n\t\t\t\tmodalDeviceName: '',\r\n\t\t\t\tlistTouchStart: 0,\r\n\t\t\t\tlistTouchDirection: null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: 'mapComponent',\r\n\t\tcomputed: {\r\n\t\t\ti18n() {\r\n\t\t\t\treturn this.$i18nMsg()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted: function() {\r\n\t\t\tlet isLogin = uni.getStorageSync('isLogin') || false\r\n\t\t\tthis.isLogin = isLogin\r\n\t\t\tisLogin && this.init()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit: function() {\r\n\t\t\t\tthis.getProductTypeList()\r\n\t\t\t\tthis.enlargeScale ? this.getCityDeviceNum() : this.getProvinceDeviceNum()\r\n\t\t\t},\r\n\t\t\tgoToLogin: function(e) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/login/login`\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetProductTypeList: function() {\r\n\t\t\t\tlet userId = uni.getStorageSync('userId')\r\n\t\t\t\tdeviceBelongApi.getProductTypeList(this, userId).then((res) => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tlet data = res.data\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tproductTypeList,\r\n\t\t\t\t\t\t\tproductTypeData\r\n\t\t\t\t\t\t} = this.$uniUtilsApi.handleProductType(this, data)\r\n\t\t\t\t\t\tthis.productTypeList = productTypeList\r\n\t\t\t\t\t\tthis.productTypeData = productTypeData\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetProvinceDeviceNum: function() {\r\n\t\t\t\tdeviceBelongApi.getProvinceDeviceNum(this).then((res) => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tlet markers = res.data\r\n\t\t\t\t\t\tthis.setMarkers(markers)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetCityDeviceNum: function() {\r\n\t\t\t\tdeviceBelongApi.getCityDeviceNum(this).then((res) => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tlet markers = res.data\r\n\t\t\t\t\t\tthis.setMarkers(markers)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetMarkers: function(markers) {\r\n\t\t\t\tthis.markers = []\r\n\t\t\t\tfor (let i = 0; i < markers.length; i++) {\r\n\t\t\t\t\tlet marker = {}\r\n\t\t\t\t\tmarker.id = Number(markers[i].cityId ? markers[i].cityId : markers[i].provinceId)\r\n\t\t\t\t\tmarker.width = 25;\r\n\t\t\t\t\tmarker.height = 25;\r\n\t\t\t\t\tmarker.latitude = Number(markers[i].lat);\r\n\t\t\t\t\tmarker.longitude = Number(markers[i].lng);\r\n\t\t\t\t\tif (markers[i].num >= 99) {\r\n\t\t\t\t\t\tmarker.iconPath = '../../static/numsImage/local_99.png';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmarker.iconPath = '../../static/numsImage/local_' + markers[i].num + '.png';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$set(this.markers, i, marker)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmarkertap: function(e) {\r\n\t\t\t\t// console.log(typeof e.detail.markerId)\r\n\t\t\t\tthis.markerId = e.detail.markerId\r\n\t\t\t\tthis.isShowDeviceList = true\r\n\t\t\t\tthis.$emit('isShowNav', false);\r\n\t\t\t\tthis.currentPage = 1\r\n\t\t\t},\r\n\t\t\tmarkerGetDeviceList: function() {\r\n\t\t\t\tlet enlargeScale = this.enlargeScale\r\n\t\t\t\tlet provinceId = enlargeScale ? null : this.markerId\r\n\t\t\t\tlet cityId = enlargeScale ? this.markerId : null\r\n\t\t\t\tlet productId = this.productId\r\n\t\t\t\tlet status = this.status\r\n\t\t\t\tlet currentPage = this.currentPage\r\n\t\t\t\tlet pageSize = this.pageSize\r\n\t\t\t\tdeviceBelongApi.MarkerGetDeviceList(this, provinceId, cityId, productId, status, currentPage, pageSize).then((res) => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tcurrentPage,\r\n\t\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\t\ttotal\r\n\t\t\t\t\t\t} = res.data\r\n\t\t\t\t\t\tthis.totalDeviceNum = total\r\n\t\t\t\t\t\tthis.mescroll.endByPage(data.length, total)\r\n\t\t\t\t\t\tlet index = currentPage - 1\r\n\t\t\t\t\t\tlet list = this.$uniUtilsApi.initDeviceList(this.i18n.status, data)\r\n\t\t\t\t\t\tthis.$set(this.deviceList, index, list)\r\n\t\t\t\t\t\tthis.currentPage = currentPage + 1\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tregionchange: function() {\r\n\t\t\t\tlet promise = new Promise((resolve) => {\r\n\t\t\t\t\tuni.createMapContext('myMap', this).getScale({\r\n\t\t\t\t\t\tsuccess: (e) => {\r\n\t\t\t\t\t\t\tresolve(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tpromise.then((e) => {\r\n\t\t\t\t\tthis.getDeviceNum(e)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetDeviceNum: function(e) {\r\n\t\t\t\tlet enlargeScale = this.enlargeScale\r\n\t\t\t\tlet scale = e.scale\r\n\t\t\t\tif (scale < 7 && enlargeScale) {\r\n\t\t\t\t\tthis.getProvinceDeviceNum()\r\n\t\t\t\t\tthis.enlargeScale = false\r\n\t\t\t\t} else if (scale >= 7 && !enlargeScale) {\r\n\t\t\t\t\tthis.getCityDeviceNum()\r\n\t\t\t\t\tthis.enlargeScale = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thideDeviceList: function() {\r\n\t\t\t\tthis.isShowDeviceList = false\r\n\t\t\t\tthis.$emit('isShowNav', true);\r\n\t\t\t\tthis.currentStatusIndex = 0\r\n\t\t\t\tthis.currentTypeIndex = 0\r\n\t\t\t\tthis.status = null\r\n\t\t\t\tthis.productId = null\r\n\t\t\t\tthis.currentPage = 1\r\n\t\t\t\tthis.deviceList = []\r\n\t\t\t},\r\n\t\t\tListTouchStart: function(e) {\r\n\t\t\t\tthis.listTouchStart = e.touches[0].pageX\r\n\t\t\t},\r\n\t\t\tListTouchMove: function(e) {\r\n\t\t\t\tthis.listTouchDirection = e.touches[0].pageX - this.listTouchStart > 0 ? 'right' : 'left'\r\n\t\t\t},\r\n\t\t\tListTouchEnd: function(e) {\r\n\t\t\t\tif (this.listTouchDirection == 'left') {\r\n\t\t\t\t\tthis.modalDeviceName = e.currentTarget.dataset.devicename\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.modalDeviceName = null\r\n\t\t\t\t}\r\n\t\t\t\tthis.listTouchDirection = null\r\n\t\t\t},\r\n\t\t\tdeviceNavigation: function(deviceName, deviceCore, pageCur) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/deviceNavigation/deviceNavigation?deviceName=${deviceName}&deviceCore=${deviceCore}&pageCur=${pageCur}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigation: function(e) {\r\n\t\t\t\tlet deviceLat = e.deviceLat\r\n\t\t\t\tlet deviceLng = e.deviceLng\r\n\t\t\t\tlet deviceName = e.deviceName\r\n\t\t\t\tlet deviceAddr = e.deviceAddr\r\n\t\t\t\tuni.getLocation({ //获取当前经纬度\r\n\t\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.openLocation({ //​使用微信内置地图查看位置。\r\n\t\t\t\t\t\t\tlatitude: deviceLat,\r\n\t\t\t\t\t\t\tlongitude: deviceLng,\r\n\t\t\t\t\t\t\tname: deviceName,\r\n\t\t\t\t\t\t\taddress: deviceAddr,\r\n\t\t\t\t\t\t\tsuccess: () => {}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tproductStatusChange: function(e) {\r\n\t\t\t\tlet statusArray = [null, 'ONLINE', 'OFFLINE', 'UNACTIVE', 'DISABLE']\r\n\t\t\t\tlet index = e.detail.value\r\n\t\t\t\tthis.currentStatusIndex = index\r\n\t\t\t\tthis.status = statusArray[index]\r\n\t\t\t\tthis.currentPage = 1\r\n\t\t\t\tthis.deviceList = []\r\n\t\t\t\tthis.mescroll.resetUpScroll()\r\n\t\t\t},\r\n\t\t\tproductTypeChange: function(e) {\r\n\t\t\t\tlet index = e.detail.value\r\n\t\t\t\tthis.currentTypeIndex = index\r\n\t\t\t\tthis.productId = this.productTypeData[index].productId\r\n\t\t\t\tthis.currentPage = 1\r\n\t\t\t\tthis.deviceList = []\r\n\t\t\t\tthis.mescroll.resetUpScroll()\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tmapFav,\r\n\t\t\tsurplus,\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.ztnCustom-background-color {\r\n\t\tposition: fixed;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\ttop: 0;\r\n\t\tz-index: 998;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\r\n\t}\r\n\r\n\t.ztnCustom-hideIcon {\r\n\t\twidth: 45upx;\r\n\t\theight: 45upx;\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\r\n\t.ztnCustom-cur {\r\n\t\ttransition: all .6s ease-in-out 0s;\r\n\t\ttransform: translateX(0upx)\r\n\t}\r\n\r\n\t.ztnCustom-move-cur {\r\n\t\ttransform: translateX(-300rpx)\r\n\t}\r\n\r\n\t.ztnCustom-move {\r\n\t\tposition: absolute;\r\n\t\tz-index: 999;\r\n\t\tright: 0;\r\n\t\tdisplay: flex;\r\n\t\twidth: 300rpx;\r\n\t\theight: 100%;\r\n\t\ttransform: translateX(100%);\r\n\t}\r\n\r\n\t.ztnCustom-move .view {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center\r\n\t}\r\n\r\n\t.ztnCustom-mapFav {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tbottom: 15%;\r\n\t}\r\n\r\n\t/*说明*/\r\n\t.notice {\r\n\t\tfont-size: 30upx;\r\n\t\tpadding: 40upx 0;\r\n\t\tborder-bottom: 1upx solid #eee;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t/*展示上拉加载的数据列表*/\r\n\t.news-li {\r\n\t\tfont-size: 32upx;\r\n\t\tpadding: 32upx;\r\n\t\tborder-bottom: 1upx solid #eee;\r\n\t}\r\n\r\n\t.news-li .new-content {\r\n\t\tfont-size: 28upx;\r\n\t\tmargin-top: 10upx;\r\n\t\tmargin-left: 20upx;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./map.vue?vue&type=style&index=0&id=0b31f540&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./map.vue?vue&type=style&index=0&id=0b31f540&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1614593745196\n      var cssReload = require(\"E:/HBuilderX/HBuilderX.1.9.4.20190426.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/map/map.vue'\ncreatePage(Page)"],"sourceRoot":""}