{"version":3,"sources":["uni-app:///main.js","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/deviceLocal/deviceLocal.vue?0538","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/deviceLocal/deviceLocal.vue?aa90","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/deviceLocal/deviceLocal.vue?ae57","webpack:///F:/中泰能uniapp/ztn-uniapp/pages/deviceLocal/deviceLocal.vue?34b8","uni-app:///pages/deviceLocal/deviceLocal.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,+G;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;;;AAG1D;AAC+M;AAC/M,gBAAgB,uNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAAuzB,CAAgB,u0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqD30B,mK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,yBADA,EAEA,eAFA,EAGA,oBAHA,EAIA,qBAJA,EAKA,0BALA,EAMA,kBANA,EAOA,cAPA,EAQA,eARA,EASA,gBATA,EAUA,QAVA,EAWA,aAXA,EAYA,YAZA,EAaA,WAbA,EAcA,mBAdA,EAeA,cAfA,EAgBA,cAhBA,EAiBA,cAjBA,EAkBA,YAlBA,EAmBA,2BAnBA,EAoBA,oBApBA,GAsBA,CAxBA,EAyBA,YACA,IADA,kBACA,CACA,uBACA,CAHA,EAIA,SAJA,uBAIA,CACA,+BACA,CANA,EAzBA,EAiCA,6BACA,oEACA,iCACA,UACA,gBACA,eACA,sBACA,MACA,iBACA,oBACA,MACA,kBACA,oBACA,MACA,QACA,MAXA,CAaA,mDACA;AACA,GApDA;AAqDA;AACA;AACA;AACA;AACA,+BADA;;AAGA,GA3DA;AA4DA;AACA;AACA;AACA;AACA;AACA,GAjEA;AAkEA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBADA;;AAGA,aAJA,EAIA,IAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA,WAPA,MAOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAJA,EAIA,IAJA;;;;;;AAUA,eAZA,EAYA,GAZA;AAaA,aAdA;AAeA;AACA;AACA,OA/DA;AAgEA,KA1EA;AA2EA;AACA;AACA;AACA;AACA;AACA,KAhFA;AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA;AACA;AACA;AACA,8BADA;AAEA,gCAFA;AAGA,4BAHA;AAIA,4BAJA;;AAMA,SAVA;AAWA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KAxGA;AAyGA;AACA;AACA,KA3GA;AA4GA;AACA;AACA,KA9GA;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtHA,EAlEA;;AA0LA;AACA;AACA;AACA;AACA;AACA,uFADA;AAEA,+GAFA;AAGA;AACA;AACA,OALA;;AAOA,GArMA,E","file":"pages/deviceLocal/deviceLocal.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/deviceLocal/deviceLocal.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./deviceLocal.vue?vue&type=template&id=2bb2b672&\"\nvar renderjs\nimport script from \"./deviceLocal.vue?vue&type=script&lang=js&\"\nexport * from \"./deviceLocal.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/deviceLocal/deviceLocal.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceLocal.vue?vue&type=template&id=2bb2b672&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.deviceLocalList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var f0 = _vm._f(\"formatDateTime\")(item.timestamp, _vm.i18n.unknown)\n\n    return {\n      $orig: $orig,\n      f0: f0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceLocal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\HBuilderX.1.9.4.20190426.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./deviceLocal.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<cu-custom v-if=\"isToHome\" :isHome=\"true\">\r\n\t\t\t<block slot=\"homeText\" class=\"text-white\" :style=\"[{color:navigationBarTextColor}]\">{{deviceName}}</block>\r\n\t\t</cu-custom>\r\n\t\t<cu-custom v-else :isBack=\"true\">\r\n\t\t\t<block slot=\"backText\" class=\"text-white\" :style=\"[{color:navigationBarTextColor}]\">{{deviceName}}</block>\r\n\t\t</cu-custom>\r\n\t\t<map v-if=\"isShowMap\" id=\"myMap\" style=\"width: 100%;height: 400upx\" :scale=\"scale\" :longitude=\"longitude\" :latitude=\"latitude\"\r\n\t\t :markers=\"markers\"></map>\r\n\t\t<scroll-view scroll-y=\"true\" :style=\"scrollStyle\">\r\n\t\t\t<view class=\"cu-timeline\" v-for=\"(item,index) in deviceLocalList\" :key=\"index\">\r\n\t\t\t\t<view class=\"cu-time\" v-if=\"item.status=='OFFLINE'\">{{i18n.precision}}:{{item.radius}}</view>\r\n\t\t\t\t<view class=\"cu-item cuIcon-attentionfill\" :style=\"[{color:lightColor}]\">\r\n\t\t\t\t\t<view class=\"content\" style=\"background-color:#f8f8f8;\">\r\n\t\t\t\t\t\t<view class=\"flex justify-between align-center\">\r\n\t\t\t\t\t\t\t<view style=\"flex-basis:90%;\" @tap=\"tapMarker(item)\">\r\n\t\t\t\t\t\t\t\t<view><text class=\"text-gray\">{{i18n.serial}}:{{index+1}}</text><text class=\"text-gray margin-left\">{{item.timestamp | formatDateTime(i18n.unknown)}}</text></view>\r\n\t\t\t\t\t\t\t\t<view style=\"color:#666666\">{{item.address}}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view @tap=\"navigation(item)\">\r\n\t\t\t\t\t\t\t\t<text class=\"cuIcon-footprint\" style=\"font-size: 44upx;\" :style=\"[{color:emphasizeColor}]\"></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<view class=\"cu-modal\" :class=\"[isShowAuthorizeModal ?'show':'']\">\r\n\t\t\t<view class=\"cu-dialog\">\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"content\">{{i18n.authorize}}</view>\r\n\t\t\t\t\t<view class=\"action\" @tap=\"hideAuthorizeModal\">\r\n\t\t\t\t\t\t<text class=\"cuIcon-close text-red\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"padding-xl\">\r\n\t\t\t\t\t{{i18n.leadGoAuthorize}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<button class=\"cu-btn line-green text-green\" :style=\"[{borderColor:emphasizeColor,color:emphasizeColor}]\" @tap=\"hideAuthorizeModal\">{{i18n.cancel}}</button>\r\n\t\t\t\t\t\t<button class=\"cu-btn bg-green margin-left\" :style=\"[{backgroundColor:emphasizeColor}]\" open-type=\"openSetting\"\r\n\t\t\t\t\t\t @opensetting='authorizeManage'>{{i18n.confirm}}</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport * as deviceLocalApi from '@/common/utils/ztnUniAppApi/ztnRequestApi/deviceApi/deviceLocalApi/deviceLocalApi.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tCustomBar: this.CustomBar,\r\n\t\t\t\tisToHome: false,\r\n\t\t\t\tfromLoginBack: false,\r\n\t\t\t\tisLoginOverdue: false,\r\n\t\t\t\tnavigationBarTextColor: '',\r\n\t\t\t\temphasizeColor: '',\r\n\t\t\t\tlightColor: '',\r\n\t\t\t\tscrollStyle: '',\r\n\t\t\t\tisShowMap: false,\r\n\t\t\t\tscale: 8,\r\n\t\t\t\tlongitude: '',\r\n\t\t\t\tlatitude: '',\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\tdeviceLocalList: [],\r\n\t\t\t\tdeviceName: '',\r\n\t\t\t\tdeviceCore: '',\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpageSize: 50,\r\n\t\t\t\tisShowAuthorizeModal: false,\r\n\t\t\t\tnavigationItem: null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ti18n() {\r\n\t\t\t\treturn this.$i18nMsg()\r\n\t\t\t},\r\n\t\t\tthemei18n() {\r\n\t\t\t\treturn this.$themei18nOption()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady: function() {\r\n\t\t\tthis.navigationBarTextColor = this.themei18n.navigationBarTextColor\r\n\t\t\tlet theme = this.themei18n.theme\r\n\t\t\tlet light;\r\n\t\t\tswitch (theme) {\r\n\t\t\t\tcase 'default':\r\n\t\t\t\t\tlight = 'orangeLight'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'darkColor':\r\n\t\t\t\t\tlight = 'blueLight'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'lightColor':\r\n\t\t\t\t\tlight = 'blueLight'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.lightColor = this.themei18n.lightColor[light]\r\n\t\t\tthis.emphasizeColor = this.themei18n.emphasizeColor\r\n\t\t},\r\n\t\tonLoad: function(option) {\r\n\t\t\tlet isLogin = uni.getStorageSync('isLogin') || false\r\n\t\t\tthis.initOption = option\r\n\t\t\tisLogin ? this.init(option) : uni.navigateTo({\r\n\t\t\t\turl: '/pages/login/login'\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tthis.$uniUtilsApi.toHome(this)\r\n\t\t\tlet initOption = this.initOption\r\n\t\t\tlet fromLoginBack = this.fromLoginBack\r\n\t\t\tfromLoginBack ? (this.init(initOption), this.fromLoginBack = false, this.isLoginOverdue = false) : ''\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tinit: function(option) {\r\n\t\t\t\tthis.deviceName = option.deviceName\r\n\t\t\t\tthis.deviceCore = option.deviceCore\r\n\t\t\t\tthis.getDeviceLocal();\r\n\t\t\t},\r\n\t\t\tgetDeviceLocal: function() {\r\n\t\t\t\tlet deviceCore = this.deviceCore\r\n\t\t\t\tlet currentPage = this.currentPage\r\n\t\t\t\tlet pageSize = this.pageSize\r\n\t\t\t\tdeviceLocalApi.getDeviceLocal(this, deviceCore, currentPage, pageSize).then((res) => {\r\n\t\t\t\t\tif (res.code == '200') {\r\n\t\t\t\t\t\tlet data = res.data.data;\r\n\t\t\t\t\t\tlet page = currentPage - 1\r\n\t\t\t\t\t\tif (data.length < 1) {\r\n\t\t\t\t\t\t\tlet title = this.i18n.noData\r\n\t\t\t\t\t\t\tthis.$uniUtilsApi.showToast(title, 'none', 1000, false)\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\t\tlet marker = {}\r\n\t\t\t\t\t\t\tlet list = {}\r\n\t\t\t\t\t\t\tvar latitude = Number(data[i].lat)\r\n\t\t\t\t\t\t\tvar longitude = Number(data[i].lng)\r\n\t\t\t\t\t\t\tmarker.width = 25;\r\n\t\t\t\t\t\t\tmarker.height = 25;\r\n\t\t\t\t\t\t\tmarker.latitude = latitude\r\n\t\t\t\t\t\t\tmarker.longitude = longitude\r\n\t\t\t\t\t\t\tmarker.iconPath = `../../static/numsImage/local_${i + 1}.png`;\r\n\t\t\t\t\t\t\tthis.$set(this.markers, i, marker)\r\n\t\t\t\t\t\t\tlist.timestamp = data[i].timestamp\r\n\t\t\t\t\t\t\tlist.radius = data[i].radius + '米'\r\n\t\t\t\t\t\t\tlist.address = data[i].address\r\n\t\t\t\t\t\t\tlist.lat = data[i].lat\r\n\t\t\t\t\t\t\tlist.lng = data[i].lng\r\n\t\t\t\t\t\t\tthis.$set(this.deviceLocalList, i, list)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.latitude = latitude\r\n\t\t\t\t\t\tthis.longitude = longitude\r\n\t\t\t\t\t\tthis.isShowMap = true\r\n\t\t\t\t\t\tlet CustomBar = this.CustomBar\r\n\t\t\t\t\t\tlet screenHeight = uni.getStorageSync('screenHeight')\r\n\t\t\t\t\t\tlet mapHeight = uni.getStorageSync('mapHeight')\r\n\t\t\t\t\t\tif (mapHeight) {\r\n\t\t\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\tthis.scrollStyle = `height:${screenHeight - mapHeight - CustomBar}px`\r\n\t\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\t\t//#ifdef H5 || APP-PLUS\r\n\t\t\t\t\t\t\tthis.scrollStyle = `height:calc(${screenHeight}px - ${mapHeight}upx - ${CustomBar}px)`\r\n\t\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\t\tuni.createSelectorQuery().select('#myMap').boundingClientRect((e) => {\r\n\t\t\t\t\t\t\t\t\t\tlet height = e.height\r\n\t\t\t\t\t\t\t\t\t\tthis.scrollStyle = `height:${screenHeight - height - CustomBar}px`\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('mapHeight', height)\r\n\t\t\t\t\t\t\t\t\t}).exec()\r\n\t\t\t\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\t\t\t\t//#ifdef H5 || APP-PLUS\r\n\t\t\t\t\t\t\t\t\tthis.scrollStyle = `height:calc(${screenHeight}px - 400upx - ${CustomBar}px)`\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('mapHeight', 400)\r\n\t\t\t\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttapMarker: function(e) {\r\n\t\t\t\tlet latitude = e.lat\r\n\t\t\t\tlet longitude = e.lng\r\n\t\t\t\tthis.latitude = latitude\r\n\t\t\t\tthis.longitude = longitude\r\n\t\t\t},\r\n\t\t\tnavigation: function(e) {\r\n\t\t\t\tthis.$uniUtilsApi.showLoading(this.i18n.loading, true)\r\n\t\t\t\tlet deviceName = this.deviceName\r\n\t\t\t\tlet latitude = e.lat\r\n\t\t\t\tlet longitude = e.lng\r\n\t\t\t\tlet address = e.address\r\n\t\t\t\tuni.getLocation({ //获取当前经纬度\r\n\t\t\t\t\ttype: 'wgs84',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.$uniUtilsApi.hideLoading()\r\n\t\t\t\t\t\tuni.openLocation({ //​使用微信内置地图查看位置。\r\n\t\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\t\tname: deviceName,\r\n\t\t\t\t\t\t\taddress: address,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tthis.$uniUtilsApi.hideLoading()\r\n\t\t\t\t\t\tthis.navigationItem = e\r\n\t\t\t\t\t\tthis.showAuthorizeModal()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowAuthorizeModal: function() {\r\n\t\t\t\tthis.isShowAuthorizeModal = true\r\n\t\t\t},\r\n\t\t\thideAuthorizeModal: function() {\r\n\t\t\t\tthis.isShowAuthorizeModal = false\r\n\t\t\t},\r\n\t\t\tauthorizeManage: function(e) {\r\n\t\t\t\tlet authSetting = e.detail.authSetting\r\n\t\t\t\tif (authSetting['scope.userLocation']) {\r\n\t\t\t\t\tlet navigationItem = this.navigationItem\r\n\t\t\t\t\tthis.hideAuthorizeModal()\r\n\t\t\t\t\tthis.navigation(navigationItem)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareAppMessage: function(res) {\r\n\t\t\tlet deviceName = this.deviceName\r\n\t\t\tlet deviceCore = this.deviceCore\r\n\t\t\tlet nickName = uni.getStorageSync('nickName')\r\n\t\t\treturn {\r\n\t\t\t\ttitle: `${nickName}${this.i18n.moreOperate.share}${deviceName}`,\r\n\t\t\t\tpath: `/pages/deviceLocal/deviceLocal?deviceName=${deviceName}&&deviceCore=${deviceCore}`,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":""}