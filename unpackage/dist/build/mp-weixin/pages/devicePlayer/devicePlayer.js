(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/devicePlayer/devicePlayer"],{"2a0c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("0b74"));function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}var s={data:function(){return{CustomBar:this.CustomBar,isToHome:!1,fromLoginBack:!1,isLogin:!1,isLoginOverdue:!1,videoType:"rtmp",playUrl:"",playerContext:null,direction:"vertical",fullscreenIcon:"../../static/images/cam/full.png",playIcon:"../../static/images/cam/play.png",pauseIcon:"../../static/images/cam/pause.png",isHidden:!1,isPlay:!1,isFull:!1,actionText:"",isShowActionText:!1,deviceId:null,pushTime:60}},computed:{i18n:function(){return this.$i18nMsg()}},onReady:function(){this.playerContext=t.createLivePlayerContext("livePlayer",this)},onLoad:function(e){var n=t.getStorageSync("isLogin")||!1;this.initOption=e,this.isLogin=n,n?this.init(e):t.navigateTo({url:"/pages/login/login"})},onShow:function(){this.$uniUtilsApi.toHome(this);var t=this.initOption,e=this.fromLoginBack;e&&(this.init(t),this.fromLoginBack=!1,this.isLoginOverdue=!1,this.isLogin=!0)},onUnload:function(){var t=this.isLogin,e=this.deviceId;t&&i.stopCloud(this,e).then((function(t){t.code}))},methods:{init:function(t){this.deviceId=t.deviceId,this.pushCloud()},pushCloud:function(){var e=this,n=this.deviceId,o=this.pushTime;i.pushCloud(this,n,o).then((function(n){if("200"==n.code){var i=n.data.playUrl;if(null!=i){var o=n.data.mediaType;e.playUrl=i,e.videoType="m3u8"==o||"httpflv"==o?o:"rtmp",e.isPlay=!0}else e.$uniUtilsApi.showToast(e.i18n.invalidAddress,"none",1e3,!1)}else{if("201"==n.code)switch(n.msg){case"serverCompany":e.$uniUtilsApi.showToast(e.i18n.camera.equipmentNotSupported,"none",1e3,!1);break;case"OFFLINE":e.$uniUtilsApi.showToast(e.i18n.camera.equipmentOffline,"none",1e3,!1);break;default:e.$uniUtilsApi.showToast(e.i18n.camera.pushFailure,"none",1e3,!1);break}else e.$uniUtilsApi.showToast(e.i18n.camera.pushFailure,"none",1e3,!1);setTimeout((function(){t.navigateBack()}),1e3)}}))},tapAction:function(t){var e=t.currentTarget.id;this.actionText=t.currentTarget.dataset.label,this.sendActionCommand(e)},showActionText:function(){var t=this;this.isShowActionText=!0,setTimeout((function(){t.isShowActionText=!1}),3e3)},sendActionCommand:function(t){var e=this,n=this.deviceId;i.sendActionCommand(this,n,t).then((function(t){"200"==t.code?(e.showActionText(),e.$uniUtilsApi.showToast(e.i18n.commandSentSuccess,"none",1e3,!1)):e.$uniUtilsApi.showToast(e.i18n.commandSentfail,"none",1e3,!1)}))},tapPlay:function(t){var e=this.isPlay;e?this.playerContext.pause():this.playerContext.resume(),this.isPlay=!e},tapFullscreen:function(t){var e=this.isFull;e?this.playerContext.exitFullScreen({}):this.playerContext.requestFullScreen({}),this.isFull=!e},statechange:function(t){},error:function(t){},fullscreenChange:function(t){var e=t.detail.fullScreen;this.direction=e?"horizontal":"vertical"}},onShareAppMessage:function(e){var n=this.deviceId,i=t.getStorageSync("nickName"),o=t.getStorageSync("shortCompanyName");return{title:"".concat(i).concat(this.i18n.moreOperate.share).concat(o),path:"/pages/devicePlayer/devicePlayer?deviceId=".concat(n),success:function(t){}}}};e.default=s}).call(this,n("543d")["default"])},"5bc0":function(t,e,n){"use strict";(function(t){n("91b7"),n("921b");i(n("66fd"));var e=i(n("a36a"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},a36a:function(t,e,n){"use strict";n.r(e);var i=n("b051"),o=n("cd4a");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var s,r=n("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"02e640bc",null,!1,i["a"],s);e["default"]=c.exports},b051:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement;t._self._c},a=[]},cd4a:function(t,e,n){"use strict";n.r(e);var i=n("2a0c"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a}},[["5bc0","common/runtime","common/vendor"]]]);