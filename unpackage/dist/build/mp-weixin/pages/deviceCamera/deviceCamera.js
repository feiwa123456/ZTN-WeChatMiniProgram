(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/deviceCamera/deviceCamera"],{"0228":function(t,e,n){"use strict";n.r(e);var a=n("719d"),r=n("85a8");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("5007"),n("783c");var o,c=n("f0c5"),u=Object(c["a"])(r["default"],a["b"],a["c"],!1,null,"a98a2f64",null,!1,a["a"],o);e["default"]=u.exports},"0bca":function(t,e,n){},"4d99":function(t,e,n){},5007:function(t,e,n){"use strict";var a=n("4d99"),r=n.n(a);r.a},"719d":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var r=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"783c":function(t,e,n){"use strict";var a=n("0bca"),r=n.n(a);r.a},"7aee":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=c(n("0b74")),r=i(n("b060"));function i(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=a?Object.getOwnPropertyDescriptor(t,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}var u={mixins:[r.default],data:function(){return{CustomBar:this.CustomBar,downOption:{use:!0,auto:!1},upOption:{auto:!1,empty:{use:!0,fixed:!0,top:"20%"}},isToHome:!1,fromLoginBack:!1,isLoginOverdue:!1,currentPage:1,pageSize:10,cameraList:[],cameraAuthList:[],bottomBarHeight:"",isShowCameraAuth:!1}},computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},onLoad:function(){var e=t.getStorageSync("isLogin")||!1;e?this.init():t.navigateTo({url:"/pages/login/login"})},onShow:function(){this.$uniUtilsApi.toHome(this);var t=this.fromLoginBack;t&&(this.init(),this.fromLoginBack=!1,this.isLoginOverdue=!1)},methods:{init:function(t){this.getCameraList(),this.getCameraAuthList()},downCallback:function(){this.currentPage=1,this.cameraList=[],this.mescroll.resetUpScroll()},getCameraList:function(){var e=this,n=t.getStorageSync("userId"),r=this.currentPage,i=this.pageSize,o=[];a.getCameraDeviceList(this,n,r,i).then((function(n){if("200"==n.code){var a=n.data,i=a.data,c=a.total;if(c<1){var u=e.i18n.noData;return e.$uniUtilsApi.showToast(u,"none",1e3,!1),void setTimeout((function(){t.navigateBack({delta:1})}),1e3)}for(var s=0;s<i.length;s++){var f=i[s],d=f.picturePath,h=f.deviceId,l=f.hid,g={picturePath:d&&"".concat(d),deviceId:h,hid:l};o.push(g)}e.mescroll.endByPage(i.length,c);var m=r-1;e.$set(e.cameraList,m,o),e.currentPage=r+1}}))},tapCamera:function(e){var n=e.deviceId;t.navigateTo({url:"/pages/devicePlayer/devicePlayer?deviceId=".concat(n)})},getCameraAuthList:function(){var e=this,n=[],r=this.currentPage,i=this.pageSize,o=t.getStorageSync("userId");a.getCameraAuthList(this,o,r,i).then((function(a){if("200"==a.code){for(var r=a.data.data,i=0;i<r.length;i++){var o=r[i],c=o.userName,u=o.serverCompany;n.push({userName:c,serverCompany:u})}e.cameraAuthList=n;var s=t.getStorageSync("bottomBarHeight");s?e.bottomBarHeight=s:e.$nextTick((function(){setTimeout((function(){t.createSelectorQuery().select("#cameraAuth").boundingClientRect((function(n){if(n){var a=n.height;e.bottomBarHeight=a,t.setStorageSync("bottomBarHeight",a)}})).exec()}),0)}))}}))},openCameraAuth:function(){this.isShowCameraAuth=!this.isShowCameraAuth}},onShareAppMessage:function(e){var n=t.getStorageSync("nickName"),a=t.getStorageSync("shortCompanyName");return{title:"".concat(n).concat(this.i18n.moreOperate.share).concat(a),path:"/pages/deviceError/deviceError",success:function(t){}}}};e.default=u}).call(this,n("543d")["default"])},"85a8":function(t,e,n){"use strict";n.r(e);var a=n("7aee"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},e1b9:function(t,e,n){"use strict";(function(t){n("91b7"),n("921b");a(n("66fd"));var e=a(n("0228"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["e1b9","common/runtime","common/vendor"]]]);