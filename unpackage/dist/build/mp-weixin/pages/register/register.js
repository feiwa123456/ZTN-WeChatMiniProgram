(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/register/register"],{"3bd1":function(e,t,i){},4794:function(e,t,i){"use strict";var n=i("3bd1"),s=i.n(n);s.a},9121:function(e,t,i){"use strict";i.r(t);var n=i("b824"),s=i("f753");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("4794");var a,o=i("f0c5"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);t["default"]=u.exports},b824:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}));var s=function(){var e=this,t=e.$createElement;e._self._c},r=[]},f40f:function(e,t,i){"use strict";(function(e){i("91b7"),i("921b");n(i("66fd"));var t=n(i("9121"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},f753:function(e,t,i){"use strict";i.r(t);var n=i("f9f3"),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},f9f3:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i("870a"));function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}var a={data:function(){return{numStepList:[],numStep:0,disabledGetUserInfo:!0,useEmailRegister:!0,email:"",enablePhoneRegister:!1,phoneRegisterText:"",phoneNumber:"",verificationCode:"",verificationCodeBtn:"",isCountDown:!1,vCodeValue:"",disabledNextStep:!0,userName:"",password:"",againPassword:"",disabledNextToEnd:!0,isRegisterSuccess:!1}},computed:{i18n:function(){return this.$i18nMsg()}},onLoad:function(){this.$set(this.numStepList,0,{name:this.i18n.register.wechatAuthorize}),this.$set(this.numStepList,1,{name:this.i18n.register.verificationCode}),this.$set(this.numStepList,2,{name:this.i18n.register.userInformation}),this.$set(this.numStepList,3,{name:this.i18n.register.registerSuccess}),this.enablePhoneRegister=e.getStorageSync("enablePhoneRegister"),this.phoneRegisterText=this.i18n.register.usePhoneRegister,this.verificationCodeBtn=this.i18n.register.getCode},methods:{numSteps:function(){this.numStep=this.numStep==this.numStepList.length-1?0:this.numStep+1},checkboxChange:function(){this.disabledGetUserInfo=!this.disabledGetUserInfo},getUserInfo:function(t){var i=t.detail.userInfo;null!=i&&(this.numSteps(),e.setStorageSync("userInfo",i))},agreeProtocol:function(){this.numSteps()},changeEmailInput:function(e){var t=e.detail.value.replace(/\s/g,""),i=this.verificationCode;this.email=t,this.disabledNextStep=""==t||""==i},changePhoneNumberInput:function(e){var t=e.detail.value.replace(/\s/g,""),i=this.verificationCode;this.phoneNumber=t,this.disabledNextStep=""==t||""==i},changeVerificationCodeInput:function(e){var t,i=e.detail.value.replace(/\s/g,""),n=this.useEmailRegister,s=this.phoneNumber,r=this.email;t=n?""==r||""==i:""==s||""==i,this.verificationCode=i,this.disabledNextStep=t},checkEmail:function(e){var t=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return!!t.test(e)},checkPhoneNumber:function(e){return!!/^1[3|4|5|8][0-9]\d{8}$/.test(e)},countDown:function(e){var t=this,i=setInterval((function(){t.verificationCodeBtn=e--,-1==e&&(clearInterval(i),t.verificationCodeBtn=t.i18n.againGet,t.isCountDown=!1)}),1e3)},obtainVerificationCode:function(){var e=this.useEmailRegister;e?this.useEmailObtainVerifyCode():this.usePhoneObtainVerifyCode()},useEmailObtainVerifyCode:function(){var t=this.email,i=e.getStorageSync("companyId");if(this.checkEmail(t)){var s=n.obtainVerifyCode(this,{email:t,registerType:"email",companyId:i});this.obtainVerifyCode(s)}else this.$uniUtilsApi.showToast(this.i18n.register.wrongEmail,"none",1e3,!1)},usePhoneObtainVerifyCode:function(){var t=this.phoneNumber,i=e.getStorageSync("companyId");if(this.checkPhoneNumber(t)){var s=n.obtainVerifyCode(this,{phoneNumber:t,registerType:"phone",companyId:i});this.obtainVerifyCode(s)}else this.$uniUtilsApi.showToast(this.i18n.register.wrongPhone,"none",1e3,!1)},obtainVerifyCode:function(e){var t=this,i=60;e.then((function(e){"200"==e.code?(t.$uniUtilsApi.showToast(t.i18n.register.sendCode,"none",1e3,!1),t.vCodeValue=e.data,t.verificationCodeBtn=i,t.isCountDown=!0,t.countDown(i)):t.$uniUtilsApi.showToast(t.i18n.register.getCodeFail,"none",1e3,!1)}))},nextStep:function(){var e=this.vCodeValue,t=this.verificationCode;e==t?this.numSteps():this.$uniUtilsApi.showToast(this.i18n.register.wrongCode,"none",1e3,!1)},changeRegisterWay:function(){var e=!this.useEmailRegister;this.useEmailRegister=e,this.phoneRegisterText=e?this.i18n.register.usePhoneRegister:this.i18n.register.useEmailRegister},changeUserNameInput:function(e){var t=e.detail.value.replace(/\s/g,""),i=this.password,n=this.againPassword;this.userName=t,this.disabledNextToEnd=""==t||""==i||""==n},changePasswordInput:function(e){var t=e.detail.value.replace(/\s/g,""),i=this.userName,n=this.againPassword;this.password=t,this.disabledNextToEnd=""==i||""==t||""==n},changeAgainPasswordInput:function(e){var t=e.detail.value.replace(/\s/g,""),i=this.userName,n=this.password;this.againPassword=t,this.disabledNextToEnd=""==i||""==n||""==t},nextStepToEnd:function(){var e=this,t=this.userName,i=this.password,n=this.againPassword,s=this.phoneNumber,r=this.email,a=this.useEmailRegister;if(t.length<4)this.$uniUtilsApi.showToast(this.i18n.register.userNameLeastLength,"none",1e3,!1);else if(i.length<6)this.$uniUtilsApi.showToast(this.i18n.register.passwordLeastLength,"none",1e3,!1);else if(i!=n)this.$uniUtilsApi.showToast(this.i18n.register.passwordDifferent,"none",1e3,!1);else{var o=a?this.useEmailRegisterFun(t,i,r):this.usePhoneRegister(t,i,s);o.then((function(t){"200"==t.code?(e.numSteps(),e.isRegisterSuccess=!0):"201"==t.code&&"exist"==t.msg?e.$uniUtilsApi.showToast(e.i18n.register.userExist,"none",1e3,!1):(e.numSteps(),e.isRegisterSuccess=!1)}))}},useEmailRegisterFun:function(t,i,s){var r=e.getStorageSync("companyId");return n.register(this,{userName:t,password:i,registerType:"email",email:s,companyId:r})},usePhoneRegister:function(t,i,s){var r=e.getStorageSync("companyId");return n.register(this,{userName:t,password:i,registerType:"phone",phoneNumber:s,companyId:r})},hideModal:function(t){var i=t.currentTarget.dataset.status;"success"==i?e.navigateBack({delta:1}):"fail"==i&&(this.numSteps(),this.disabledGetUserInfo=!0,this.phoneNumber="",this.verificationCode="",this.isCountDown="",this.vCodeValue="",this.disabledNextStep=!0,this.userName="",this.password="",this.againPassword="",this.disabledNextToEnd=!0)}}};t.default=a}).call(this,i("543d")["default"])}},[["f40f","common/runtime","common/vendor"]]]);