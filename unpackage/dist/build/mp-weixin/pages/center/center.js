(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/center/center"],{"15bf":function(e,t,n){"use strict";(function(e){n("91b7"),n("921b");i(n("66fd"));var t=i(n("1c5d"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"1c5d":function(e,t,n){"use strict";n.r(t);var i=n("41f7"),o=n("c57a");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);var a,r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);t["default"]=u.exports},"41f7":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.isLogin?e.tapCurrentVersion():e.unLogin()},e.e1=function(t){e.isLogin?e.moreOperate():e.unLogin()},e.e2=function(t){e.isLogin?e.deviceNotice():e.unLogin()},e.e3=function(t){e.isLogin?e.tapScan():e.unLogin()},e.e4=function(t){e.isLogin?e.deviceError():e.unLogin()},e.e5=function(t){e.isLogin?e.deviceStatus():e.unLogin()},e.e6=function(t){e.isLogin?e.more():e.unLogin()},e.e7=function(t){e.isLogin?e.pushMessage():e.unLogin()})},s=[]},aa2d:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("a34a")),o=r(n("870a")),s=(r(n("1b64")),r(n("9bc8")));r(n("0db3")),u(n("8cdf"));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,i,o,s,a){try{var r=e[s](a),u=r.value}catch(c){return void n(c)}r.done?t(u):Promise.resolve(u).then(i,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){c(s,i,o,a,r,"next",e)}function r(e){c(s,i,o,a,r,"throw",e)}a(void 0)}))}}var f={data:function(){return{isLogin:!1,isLoginOverdue:!1,userName:"",avatarUrl:"",deviceStatusList:[{},{},{},{}],deviceStatusNumberList:[0,0,0,0],currentMessageIndex:0,currentLanguageIndex:0,currentThemeIndex:0,openMessage:!1}},name:"centerComponent",computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},mounted:function(){var t=e.getStorageSync("isLogin");this.isLogin=t,t?this.init():this.getUnLoginDeviceStatusCount()},methods:{init:function(){var t=g(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.getDeviceStatusCount(),this.userName=e.getStorageSync("userName"),this.avatarUrl=e.getStorageSync("avatarUrl"),this.openMessage=e.getStorageSync("openMessage")||!1,this.currentMessageIndex=e.getStorageSync("messageIndex")||0,this.currentThemeIndex=e.getStorageSync("themeIndex")||0,this.currentLanguageIndex=e.getStorageSync("languageIndex")||0;case 7:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),goToLogin:function(t){e.navigateTo({url:"/pages/login/login"})},getUnLoginDeviceStatusCount:function(){for(var e=this.deviceStatusList,t=0;t<e.length;t++)this.$set(this.deviceStatusList,t,{num:"--",status:this.i18n.status[t]})},getDeviceStatusCount:function(){var e=this;s.getDeviceStatusCount(this).then((function(t){if("200"==t.code){for(var n=t.data,i=0;i<n.length;i++){var o=n[i].num;switch(n[i].status){case"ONLINE":e.$set(e.deviceStatusNumberList,0,o);break;case"OFFLINE":e.$set(e.deviceStatusNumberList,1,o);break;case"UNACTIVE":e.$set(e.deviceStatusNumberList,2,o);break;case"DISABLE":e.$set(e.deviceStatusNumberList,3,o);break;default:break}}var s=0,a=e.deviceStatusList,r=(e.deviceStatusNumberList,function t(){if(s<20)setTimeout((function(){for(var n=0;n<a.length;n++)e.$set(e.deviceStatusList,n,{num:0===e.deviceStatusNumberList[n]?0:s,status:e.i18n.status[n]});s++,t()}),10);else for(var n=0;n<a.length;n++)e.$set(e.deviceStatusList,n,{num:e.deviceStatusNumberList[n],status:e.i18n.status[n]})});r()}}))},tapCurrentVersion:function(){var e=this.i18n.currentVersion,t=wx.getStorageSync("browserVersion")||"1.1.24",n=this.i18n.confirm,i=this.i18n.cancel;this.$uniUtilsApi.showModal(e,t,!1,n,i,(function(e){}))},moreOperate:function(){e.navigateTo({url:"/pages/moreOperate/moreOperate"})},deviceNotice:function(){e.navigateTo({url:"/pages/deviceNotice/deviceNotice"})},tapScan:function(){this.$uniUtilsApi.handleScan(this)},deviceError:function(){e.navigateTo({url:"/pages/deviceError/deviceError"})},deviceStatus:function(){e.navigateTo({url:"/pages/deviceStatus/deviceStatus"})},moreSetting:function(){e.navigateTo({url:"/pages/moreSetting/moreSetting"})},pushMessage:function(){var t=!this.openMessage;if(t){var n=this.i18n.openMessage;this.$uniUtilsApi.bindUserSocket(n)}else{var i=this.i18n.closeMessage;this.$uniUtilsApi.unBindUserSocket(i)}this.openMessage=t,this.currentMessageIndex=t?1:0,e.setStorageSync("openMessage",t),e.setStorageSync("messageIndex",this.currentMessageIndex)},languagePickerChange:function(t){var n=this,i=this.isLogin,s=parseInt(t.detail.value),a=0==s?"zh":"en";if(i){var r=wx.getStorageSync("userId");o.updateLanguage(this,a,r).then((function(t){"200"==t.code&&(n.currentLanguageIndex=s,n.$i18n.locale=a,n.$emit("languageChange"),e.setStorageSync("language",a),e.setStorageSync("languageIndex",s),n.$uniUtilsApi.showToast(n.i18n.changeLanguage,"none",1e3,!1))}))}else this.$i18n.locale=a,this.$emit("languageChange"),this.$uniUtilsApi.showToast(this.i18n.changeLanguage,"none",1e3,!1)},themePickerChange:function(t){var n=this.isLogin;if(n){var i=t.detail.value,o=["default","darkColor","lightColor"],s=o[i];this.currentThemeIndex=i,this.$themei18n.locale=s,e.setStorageSync("theme",s),e.setStorageSync("themeIndex",i),this.$emit("themeChange"),this.$uniUtilsApi.showToast(this.i18n.changeTheme,"none",1e3,!1)}else this.unLogin()},tapLogout:function(){var t=this,n=this.i18n.moreSetting.logout,i=this.i18n.moreSetting.logoutContent,s=this.i18n.confirm,a=this.i18n.cancel;this.$uniUtilsApi.showModal(n,i,!0,s,a,(function(n){var i,s=e.getStorageSync("openid");i=o.loginOut(t,{openid:s,type:"wxAPP"}),i.then((function(n){if(n.status){var i=e.getStorageSync("openMessage")||!1,o=t.i18n.closeMessage;i&&t.$uniUtilsApi.unBindUserSocket(o),e.removeStorageSync("openid"),e.removeStorageSync("nickName"),e.removeStorageSync("avatarUrl"),e.removeStorageSync("userId"),e.removeStorageSync("userName"),e.removeStorageSync("devKey"),e.removeStorageSync("accessToken"),e.removeStorageSync("singleLogin"),e.setStorageSync("isLogin",!1),t.isLogin=!1,i&&t.$uniUtilsApi.closeSocket(),t.$uniUtilsApi.showToast(t.i18n.logoutSuccess,"success",1e3,!1),t.$emit("unLogin"),t.getUnLoginDeviceStatusCount()}}))}),(function(e){}))},unLogin:function(){this.$uniUtilsApi.showToast(this.i18n.leadGotoLogin.unLogStatuTxt,"none",1e3,!1)},more:function(){this.$uniUtilsApi.showToast(this.i18n.noSupport,"none",1e3,!1)}}};t.default=f}).call(this,n("543d")["default"])},c57a:function(e,t,n){"use strict";n.r(t);var i=n("aa2d"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a}},[["15bf","common/runtime","common/vendor"]]]);