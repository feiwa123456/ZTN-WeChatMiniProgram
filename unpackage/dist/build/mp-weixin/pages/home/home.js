(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"19d9":function(e,t,i){"use strict";i.r(t);var n=i("e289"),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},5225:function(e,t,i){"use strict";var n=i("6bd7"),r=i.n(n);r.a},5684:function(e,t,i){"use strict";i.r(t);var n=i("7829"),r=i("19d9");for(var a in r)"default"!==a&&function(e){i.d(t,e,(function(){return r[e]}))}(a);i("5225");var o,c=i("f0c5"),s=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"a7952658",null,!1,n["a"],o);t["default"]=s.exports},"6bd7":function(e,t,i){},7829:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=[]},b965:function(e,t,i){"use strict";(function(e){i("91b7"),i("921b");n(i("66fd"));var t=n(i("5684"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},e289:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("9bc8")),r=s(i("0b74")),a=s(i("1b64")),o=s(i("5891"));function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}var u={data:function(){return{CustomBar:this.CustomBar,customIcon:"cuIcon-add",customColor:"",isShowBindDeviceModal:!1,isLoginOverdue:!1,show:"cardSwiper",indicatorDots:!0,circular:!0,autoplay:!0,interval:5e3,duration:500,indicatorActiveColor:"#70c8e2",cardSwiperList:[],videoHeight:"",videoList:[],playUrl:"",productTypeList:[],currentPage:1,pageSize:10,cameraList:[],playIcon:"../../static/images/cam/play.png",pauseIcon:"../../static/images/cam/pause.png",deviceId:"",pushTime:60}},name:"homeComponent",props:{isLogin:{type:Boolean},tabbarHeight:{type:[Number,String],default:""}},watch:{isLogin:{immediate:!0,handler:function(e,t){e&&this.initResource()},deep:!0}},computed:{themei18n:function(){return this.$themei18nOption()},i18n:function(){return this.$i18nMsg()}},mounted:function(){this.init()},methods:{init:function(){var t=e.getStorageSync("companyId");this.getCardSwiperList(t),this.getVideoList(t),this.getCardSwiperHeight()},initResource:function(){this.getCameraList(),this.getProductTypeList()},getCardSwiperList:function(e){var t=this;o.getCompanyResource(this,"phoneSlideshow",e).then((function(e){if("200"==e.code){for(var i=e.data,n=[],r=0;r<i.length;r++){var a={},o=i[r],c=o.type,s=o.url;a.id=r,a.type=c,a.url=s,n.push(a)}t.cardSwiperList=n}}))},getCardSwiperHeight:function(){var t=this,i=e.getStorageSync("videoHeight");i?this.videoHeight=i:e.createSelectorQuery().in(this).select("#cardSwiper").boundingClientRect((function(i){t.videoHeight=i.height,e.setStorageSync("videoHeight",i.height)})).exec()},cardSwiperChange:function(e){this.cardCur=e.detail.current},getVideoList:function(e){var t=this;o.getCompanyResource(this,"video",e).then((function(e){if("200"==e.code){for(var i=e.data,n=[],r=0;r<i.length;r++){var a={},o=i[r],c=o.iconUrl,s=o.url,u=o.title;a.iconUrl=c,a.url=s,a.title=u,n.push(a)}t.videoList=n}}))},tapVideo:function(e){this.show="agricultureVideo",this.playUrl=e.url},closeVideo:function(e){this.show="cardSwiper",this.playUrl="",this.stopCloud(),this.deviceId=""},getCameraList:function(){var t=this,i=e.getStorageSync("userId"),n=this.currentPage,a=this.pageSize,o=[];r.getCameraDeviceList(this,i,n,a).then((function(e){if("200"==e.code){var i=e.data,r=i.data,a=i.total;if(a<1)return void(t.cameraList=[]);for(var c=0;c<r.length;c++){var s={},u=r[c],d=u.picturePath,l=u.deviceId,h=u.hid;s.picturePath=d&&"".concat(d),s.deviceId=l,s.hid=h,o.push(s)}1==n&&o.length>3?t.cameraList=o.slice(1,5):t.cameraList=o,t.currentPage=n+1}}))},tapCamera:function(t){var i=this;this.show="cameraVideo",this.playUrl="",this.stopCloud();var n=t.deviceId;this.deviceId=n;var a=this.pushTime;r.pushCloud(this,n,a).then((function(t){if("200"==t.code){var n=t.data.playUrl;if(null!=n){var r=t.data.mediaType;i.playUrl=n,i.videoType="m3u8"==r||"httpflv"==r?r:"rtmp"}else i.$uniUtilsApi.showToast(i.i18n.invalidAddress,"none",1e3,!1)}else{if("201"==t.code)switch(t.msg){case"serverCompany":i.$uniUtilsApi.showToast(i.i18n.camera.equipmentNotSupported,"none",1e3,!1);break;case"OFFLINE":i.$uniUtilsApi.showToast(i.i18n.camera.equipmentOffline,"none",1e3,!1);break;default:i.$uniUtilsApi.showToast(i.i18n.camera.pushFailure,"none",1e3,!1);break}else i.$uniUtilsApi.showToast(i.i18n.camera.pushFailure,"none",1e3,!1);setTimeout((function(){e.navigateBack()}),1e3)}}))},stopCloud:function(){var e=this.deviceId;e&&r.stopCloud(this,e).then((function(e){e.code}))},deviceCamera:function(){e.navigateTo({url:"/pages/deviceCamera/deviceCamera"})},getProductTypeList:function(){var t=this,i=e.getStorageSync("userId");n.getProductTypeList(this,i).then((function(e){if("200"==e.code){var i=e.data,n=t.themei18n.standardColor,r=[];for(var a in n){if("grey"==a)break;r.push(n[a])}for(var o=0,c=r.length,s=0;s<i.length;s++)o<c?(i[s].color=r[o],o+=1):(i[s].color=r[0],o=1);t.productTypeList=i}}))},list:function(e){var t={pageCur:"list",productId:e.productId};this.$emit("list",t)},bindDeviceModal:function(){this.isShowBindDeviceModal=!this.isShowBindDeviceModal},bindDevice:function(e){var t=this,i=e.detail.value.deviceCore.replace(/\s/g,"");this.isShowBindDeviceModal=!1,a.getDeviceInfo(this,i).then((function(e){"200"==e.code?t.$uniUtilsApi.showToast(t.i18n.bindSuccess,"none",1e3,!1):t.$uniUtilsApi.showToast(t.i18n.bindFail,"none",1e3,!1)}))}}};t.default=u}).call(this,i("543d")["default"])}},[["b965","common/runtime","common/vendor"]]]);