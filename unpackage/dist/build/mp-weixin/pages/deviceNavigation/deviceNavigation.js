(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/deviceNavigation/deviceNavigation"],{"4fd3":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("9750"),a=c(n("fb84")),r=c(n("d907")),o=c(n("f83d"));function c(t){return t&&t.__esModule?t:{default:t}}var s=function(){n.e("components/ztn-custom/tabbar/tabbar").then(function(){return resolve(n("6cbf"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("pages/deviceInfo/component/defaultInfo")]).then(function(){return resolve(n("eaf2"))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("pages/deviceInfo/component/customInfo")]).then(function(){return resolve(n("d29e"))}.bind(null,n)).catch(n.oe)},f={data:function(){return{CustomBar:this.CustomBar,isLogin:!1,isToHome:!1,fromLoginBack:!1,pageCur:"deviceInfo",isShowCustom:!1,tabbarList:[],tabbarHeight:"",deviceCore:"",deviceName:"",settingName:"",command:"",setting:"",value:"",port:"",childPort:""}},computed:{i18n:function(){return this.$i18nMsg()}},onLoad:function(e){var n=t.getStorageSync("isLogin")||!1;this.isLogin=n,!n&&t.navigateTo({url:"/pages/login/login"}),this.infoComponent(),this.init(e),this.initTabbar()},onShow:function(){var t=this;this.$uniUtilsApi.toHome(this);var e=this.fromLoginBack;if(e){var n=this.pageCur;this.pageCur="",this.$nextTick((function(){t.pageCur=n,t.fromLoginBack=!1,t.isLogin=!0}))}},methods:{infoComponent:function(){var e=t.getStorageSync("companyId");this.isShowCustom=-1!==i.customDeviceInfoCompanyIdArr.indexOf(e)},initTabbar:function(){this.tabbarList=[{tabbar:"deviceInfo",tabbarName:this.i18n.deviceNavigation.deviceInfo,tabbarCuIcon:"cuIcon-newsfill"},{tabbar:"deviceParam",tabbarName:this.i18n.deviceNavigation.deviceParam,tabbarCuIcon:"cuIcon-btn"},{tabbar:"deviceSensor",tabbarName:this.i18n.deviceNavigation.deviceSensor,tabbarCuIcon:"cuIcon-rankfill"},{tabbar:"deviceController",tabbarName:this.i18n.deviceNavigation.deviceController,tabbarCuIcon:"cuIcon-settingsfill"}]},init:function(t){var e=t.pageCur,n=t.deviceCore,i=t.deviceName,a=t.settingName,r=t.command,o=t.setting,c=t.value,s=t.port,u=t.childPort;this.pageCur=e||"deviceInfo",this.deviceCore=n,this.deviceName=i,this.settingName=a,this.command=r,this.setting=o,this.value=c,this.port=s,this.childPort=u},getTabbarHeight:function(t){this.tabbarHeight=t},navChange:function(t){var e=this.pageCur;e!==t?this.pageCur=t:(this.$uniUtilsApi.showToast(this.i18n.refreshSuccess,"none",1e3,!1),this.$refs["".concat(t)].init())}},components:{defaultInfoComponent:u,customInfoComponent:l,paramComponent:a.default,sensorComponent:r.default,controllerComponent:o.default,tabbar:s},onShareAppMessage:function(e){var n=this.pageCur,i=this.deviceName,a=this.deviceCore,r=t.getStorageSync("nickName"),o=t.getStorageSync("shortCompanyName");return{title:i?"".concat(r).concat(this.i18n.moreOperate.share).concat(i):"".concat(r).concat(this.i18n.moreOperate.share).concat(o),path:"/pages/deviceNavigation/deviceNavigation?deviceName=".concat(i,"&&deviceCore=").concat(a,"&&pageCur=").concat(n)}}};e.default=f}).call(this,n("543d")["default"])},"5b38":function(t,e,n){"use strict";n.r(e);var i=n("6071"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},6071:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a549")),a=c(n("f477")),r=c(n("0b74"));function o(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=i?Object.getOwnPropertyDescriptor(t,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}for(var s=function(){n.e("components/ztn-custom/circleComponent/circleComponent").then(function(){return resolve(n("165c"))}.bind(null,n)).catch(n.oe)},u=[],l=[],f=[],d=[],h=0;h<24;h++){var v=h+"";u[h]=v[1]?v:"0"+v}for(var p=0;p<60;p++){var m=p+"";l[p]=m[1]?m:"0"+m}for(var g=0;g<24;g++){var b=g+"";f[g]=b[1]?b:"0"+b}for(var C=0;C<60;C++){var y=C+"";d[C]=y[1]?y:"0"+y}var S={data:function(){return{CustomBar:this.CustomBar,isLogin:!1,isLoginOverdue:!1,navigationBarTextColor:"",showVideo:!1,cameraList:[],cameraListModalStyle:"",showCameraListModal:!1,videoType:"",playUrl:"",playerContext:null,direction:"vertical",isPlay:!1,pushTime:60,playIcon:"../../static/images/cam/play.png",pauseIcon:"../../static/images/cam/pause.png",circleBgColor:"#f8f8f8",style:"",sensorWithSetting:[],multiArray:[u,l,f,d],multiIndex:[0,0,0,0],settingError:"",showErrorModal:!1,emphasizeColor:"",selectButton:"",paddingBottomStyle:"",theme:""}},props:{deviceName:{type:String,default:""},deviceCore:{type:String,default:""},tabbarHeight:{type:[Number,String],default:0},isToHome:{type:Boolean,default:!1}},computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},beforeMount:function(){var t,e=this.themei18n.emphasizeColor,n=this.themei18n.theme;switch(this.theme=n,n){case"default":t="orangeLight";break;case"darkColor":t="blueLight";break;case"lightColor":t="blueLight";break;default:break}var i=this.themei18n.lightColor;this.circleBgColor=i[t],this.emphasizeColor=e,this.selectButton="background:${emphasizeColor};color:#fff; border: 1upx solid ${emphasizeColor}"},mounted:function(){var e=t.getStorageSync("isLogin")||!1;this.isLogin=e,e&&this.init()},methods:{init:function(){this.sensorWithSetting=[],this.cameraList=[],this.getListWith(),this.getCameraList(),this.navigationBarTextColor=this.themei18n.navigationBarTextColor},getListWith:function(){var t=this,e=this.deviceCore,n=!1,i=!1,r=!0;a.getListWith(this,e,n,i,r).then((function(e){if("200"==e.code){var n=e.data.filter((function(t,e){return 0==t.hidden}));if(n.length>0){for(var i=n.filter((function(t,e){return 0!=t.settingList.length})),a=0;a<i.length;a++){var r=i[a].type;i[a].type=t.i18n.deviceSensor.sensorType[r],i[a].settingList=t.getSettingList(i[a].settingList)}t.sensorWithSetting=i}}}))},getSettingList:function(t){for(var e=t.filter((function(t,e,n){return 0==t.hidden})),n=0;n<e.length;n++)if("switch"==e[n].type)e[n].value=1==e[n].value;else if("timeSlot"==e[n].type)if(-1!=e[n].value.indexOf("/")){var i=e[n].value.split(" / "),a=i[0].split(":"),r=i[1].split(":");e[n].multiIndex=a.concat(r),e[n].value=a.map(this.formatNumber).join(":")+" / "+r.map(this.formatNumber).join(":")}else e[n].multiIndex=[0,0,0,0];return e},formatNumber:function(t){return t=t.toString(),t[1]?t:"0"+t},changeParam:function(t){var e=t.currentTarget.dataset,n=e.change,i=e.keyname||"",a=e.port||"",r=e.childport||"";switch(n){case"custom":var o=t.detail.value.custom;this.saveSetting(o,i,a,r);break;case"fixed":var c=e.value;this.saveSetting(c,i,a,r);break;case"switch":var s=t.detail.value?"1":"0";this.saveSetting(s,i,a,r);break;case"timeSet":var u=t.detail.value;this.saveSetting(u,i,a,r);break;case"periodTime":var l=t.detail.value,f=this.multiArray[0][l[0]],d=this.multiArray[1][l[1]],h=this.multiArray[2][l[2]],v=this.multiArray[3][l[3]],p=f+":"+d+" / "+h+":"+v;this.saveSetting(p,i,a,r);break;case"nop":this.saveSetting(null,i,a,r);break;case"slider":var m=t.detail.value;this.saveSetting(m,i,a,r);break;default:}},saveSetting:function(t,e,n,a){var r=this;this.$uniUtilsApi.showLoading(this.i18n.loading,!0);var o=this.deviceCore;i.saveSetting(this,o,t,e,n,a).then((function(t){"200"==t.code&&(r.$uniUtilsApi.hideLoading(),r.$uniUtilsApi.showToast(r.i18n.setSuccess,"none",1e3,!0),r.getListWith())}))},hideErrorModal:function(){this.showErrorModal=!1},getCameraList:function(){var e=this,n=this.deviceCore,i=t.getStorageSync("userId");r.getCameraList(this,i,n).then((function(t){var n=e.tabbarHeight;"200"==t.code?(e.cameraList=t.data,e.paddingBottomStyle="padding-bottom:calc(".concat(n,"px + 110rpx)")):e.paddingBottomStyle="padding-bottom:".concat(n,"px")}))},openCameraListModal:function(){var t=this.CustomBar;this.cameraListModalStyle="top:".concat(t,"px;height:calc(100vh - {{CustomBar}}px)"),this.showCameraListModal=!0},hideCameraListModal:function(){this.showCameraListModal=!1},tapCamera:function(t){var e=t.deviceId,n=this.pushTime;this.pushCloud(e,n)},pushCloud:function(t,e){var n=this;r.pushCloud(this,t,e).then((function(t){if("200"==t.code){var e=t.data.playUrl;if(null!=e){var i=t.data.mediaType;n.videoType="m3u8"==i||"httpflv"==i?i:"rtmp",n.playUrl=e,n.isPlay=!0;var a=n.CustomBar+"px",r=wx.getStorageSync("screenHeight")+"px";n.style="height:calc(".concat(r," - 225px - ").concat(a,");margin-top:225px"),n.showVideo=!0}else n.$uniUtilsApi.showToast(n.i18n.camera.invalidAddress,"none",1e3,!1)}else if("201"==t.code)switch(t.msg){case"serverCompany":n.$uniUtilsApi.showToast(n.i18n.camera.equipmentNotSupported,"none",1e3,!1);break;case"OFFLINE":n.$uniUtilsApi.showToast(n.i18n.camera.equipmentOffline,"none",1e3,!1);break;default:n.$uniUtilsApi.showToast(n.i18n.camera.pushFailure,"none",1e3,!1);break}else n.$uniUtilsApi.showToast(n.i18n.camera.pushFailure,"none",1e3,!1)}))},closeVideo:function(){this.showVideo=!1,this.style=""},tapPlay:function(){var t=this.isPlay;t?this.playerContext.pause():this.playerContext.resume(),this.isPlay=!t},statechange:function(t){},error:function(t){}},components:{circleComponent:s}};e.default=S}).call(this,n("543d")["default"])},6168:function(t,e,n){"use strict";n.r(e);var i=n("8043"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},6657:function(t,e,n){},"70ce":function(t,e,n){"use strict";(function(t){n("91b7"),n("921b");i(n("66fd"));var e=i(n("8a32"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"7b95":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},r=[]},8043:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(n("ed3d"));var i=r(n("c142"));function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=i?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}return n.default=t,e&&e.set(t,n),n}var o={data:function(){return{CustomBar:this.CustomBar,isLoginOverdue:!1,paramList:[],emphasizeColor:"",circleBgColor:"",navigationBarTextColor:""}},props:{deviceName:{type:String,default:""},deviceCore:{type:String,default:""},tabbarHeight:{type:[Number,String],default:""},isToHome:{type:Boolean,default:!1}},computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},mounted:function(){var e=t.getStorageSync("isLogin")||!1;e&&this.init(),this.navigationBarTextColor=this.themei18n.navigationBarTextColor;var n,i=this.themei18n.theme;switch(i){case"default":n="orangeLight";break;case"darkColor":n="blueLight";break;case"lightColor":n="blueLight";break;default:break}var a=this.themei18n.lightColor;this.circleBgColor=a[n],this.emphasizeColor=this.themei18n.emphasizeColor},methods:{init:function(t){this.getParamList()},getParamList:function(e){var n=this,a=(this.CustomBar,this.deviceCore);t.getStorageSync("screenHeight");i.getOtherParam(this,a).then((function(t){if("200"==t.code){for(var e=t.data,i=[],a=0;a<e.length;a++){var r={},o=e[a],c=o.iconUrl,s=o.name,u=o.updateDate,l=o.unit,f=o.value;r.iconUrl=c,r.name=s,r.updateDate=u,r.unit=l,r.value=f,f.length>10||s.length>8?r.isFullLine=!0:r.isFullLine=!1,i.push(r)}n.paramList=i}else n.$uniUtilsApi.showToast(n.i18n.noData,"none",1e3,!1)}))}}};e.default=o}).call(this,n("543d")["default"])},8619:function(t,e,n){},"8a32":function(t,e,n){"use strict";n.r(e);var i=n("cffc"),a=n("f5e1");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("c1c1");var o,c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=s.exports},"94fc":function(t,e,n){},ad4a:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("f477")),a=o(n("0b74"));function r(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var o=i?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}var c=function(){n.e("components/ztn-custom/circleComponent/circleComponent").then(function(){return resolve(n("165c"))}.bind(null,n)).catch(n.oe)},s={data:function(){return{CustomBar:this.CustomBar,isLoginOverdue:!1,navigationBarTextColor:"",emphasizeColor:"",circleBgColor:"#ffffff",sensorsList:[],cameraList:[],cameraStyle:"display:none"}},props:{deviceName:{type:String,default:""},deviceCore:{type:String,default:""},tabbarHeight:{type:[Number,String],default:0},isToHome:{type:Boolean,default:!1}},computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},mounted:function(){var e=t.getStorageSync("isLogin")||!1;e&&this.init()},methods:{init:function(){this.getSensorList(),this.getCameraList(),this.navigationBarTextColor=this.themei18n.navigationBarTextColor;var t,e=this.themei18n.theme;switch(e){case"default":t="orangeLight";break;case"darkColor":t="blueLight";break;case"lightColor":t="blueLight";break;default:break}var n=this.themei18n.lightColor;this.circleBgColor=n[t],this.emphasizeColor=this.themei18n.emphasizeColor},getSensorList:function(t){var e=this,n=this.deviceCore;i.getSensorList(this,n).then((function(t){if("200"==t.code){var n=t.data,i=n.filter((function(t,e){return 0==t.hidden}));if(i.length>0){for(var a=0;a<i.length;a++){var r=i[a].type;i[a].type=e.i18n.deviceSensor.sensorType[r]}e.sensorsList=i}}}))},getCameraList:function(e){var n=this,i=this.deviceCore,r=t.getStorageSync("userId");a.getCameraList(this,r,i).then((function(t){if("200"==t.code){var e=t.data;n.cameraStyle=0==e.length?"display:none":"display:block";for(var i=0;i<e.length;i++){var a=e[i],r=a.picturePath,o=a.deviceId,c=a.name,s={picturePath:r?"".concat(r):null,deviceId:o,name:c};n.$set(n.cameraList,i,s)}}}))},tapCamera:function(e){var n=e.deviceId,i=e.name;t.navigateTo({url:"/pages/devicePlayer/devicePlayer?deviceId=".concat(n,"&name=").concat(i)})},tapSensor:function(e){var n=e.sensorId,i=e.sensorName,a=e.deviceCore,r=e.port,o=this.deviceName;t.navigateTo({url:"/pages/deviceSensorExplain/deviceSensorExplain?sensorId=".concat(n,"&sensorName=").concat(i,"&deviceCore=").concat(a,"&deviceName=").concat(o,"&port=").concat(r)})}},components:{circleComponent:c}};e.default=s}).call(this,n("543d")["default"])},aff7:function(t,e,n){"use strict";n.r(e);var i=n("ad4a"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},b484:function(t,e,n){"use strict";var i=n("94fc"),a=n.n(i);a.a},c1c1:function(t,e,n){"use strict";var i=n("6657"),a=n.n(i);a.a},ce27:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},r=[]},cffc:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},r=[]},d907:function(t,e,n){"use strict";n.r(e);var i=n("7b95"),a=n("aff7");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o,c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=s.exports},e5e0:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.paramList,(function(e,n){var i=t.__get_orig(e),a=t._f("formatDateTime")(e.updateDate,t.i18n.unknown);return{$orig:i,f0:a}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},f17b:function(t,e,n){"use strict";var i=n("8619"),a=n.n(i);a.a},f5e1:function(t,e,n){"use strict";n.r(e);var i=n("4fd3"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},f83d:function(t,e,n){"use strict";n.r(e);var i=n("ce27"),a=n("5b38");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("f17b");var o,c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"d5d10e64",null,!1,i["a"],o);e["default"]=s.exports},fb84:function(t,e,n){"use strict";n.r(e);var i=n("e5e0"),a=n("6168");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("b484");var o,c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"67b6b836",null,!1,i["a"],o);e["default"]=s.exports}},[["70ce","common/runtime","common/vendor"]]]);