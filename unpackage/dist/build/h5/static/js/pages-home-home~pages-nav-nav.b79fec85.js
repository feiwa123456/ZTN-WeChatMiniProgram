(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-home~pages-nav-nav"],{"0b74":function(t,e,i){"use strict";function a(t,e,i){var a=t.$uniBaseRequest(t,"/camera/bind/list",{userId:e,deviceCore:i});return a}function n(t,e,i,a){var n=t.$uniBaseRequest(t,"/camera/device/pageGet",{userId:e,currentPage:i,pageSize:a});return n}function o(t,e,i,a){var n=t.$uniBaseRequest(t,"/camera/auth/pageGet",{userId:e,currentPage:i,pageSize:a});return n}function r(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,a=t.$uniBaseRequest(t,"/camera/device/pushCloud",{mediaType:"rtmp",deviceId:e,pushTime:i});return a}function s(t,e){var i=t.$uniBaseRequest(t,"/camera/device/stopCloud",{deviceId:e});return i}function c(t,e){var i=t.$uniBaseRequest(t,"/camera/device/keepPushCloud",{mediaType:"rtmp",deviceId:e});return i}function u(t,e,i){var a=t.$uniBaseRequest(t,"/camera/device/controlAction",{deviceId:e,action:i});return a}Object.defineProperty(e,"__esModule",{value:!0}),e.getCameraList=a,e.getCameraDeviceList=n,e.getCameraAuthList=o,e.pushCloud=r,e.stopCloud=s,e.keepPushCloud=c,e.sendActionCommand=u},"19d9":function(t,e,i){"use strict";i.r(e);var a=i("f07b"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},5684:function(t,e,i){"use strict";i.r(e);var a=i("d37d"),n=i("19d9");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("6894");var r,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"97c8e05c",null,!1,a["a"],r);e["default"]=c.exports},6894:function(t,e,i){"use strict";var a=i("f946"),n=i.n(a);n.a},a831:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.scrollPage[data-v-97c8e05c]{height:100vh}.card-swiper-item[data-v-97c8e05c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;overflow:unset}.ztnCustom-videoImage[data-v-97c8e05c]:nth-child(odd){margin-left:%?30?%;margin-right:%?30?%}.ztnCustom-videoImage[data-v-97c8e05c]:nth-child(even){margin-right:%?30?%}.cardTitle[data-v-97c8e05c]{color:#fff;padding:%?60?% %?30?%;font-size:%?40?%;font-weight:300;\n\t/* transform: skew(-10deg, 0deg); */position:relative;text-shadow:0 0 %?6?% rgba(0,0,0,.3)}.nav-list[data-v-97c8e05c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:0 %?40?% 0;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.nav-li[data-v-97c8e05c]{padding:%?30?%;-webkit-border-radius:%?12?%;border-radius:%?12?%;width:45%;margin:0 2.5% %?40?%;background-image:url(https://cdn.nlark.com/yuque/0/2019/png/280374/1552996358352-assets/web-upload/cc3b1807-c684-4b83-8f80-80e5b8a6b975.png);background-size:cover;background-position:50%;position:relative;z-index:1}.nav-li[data-v-97c8e05c]::after{content:"";position:absolute;z-index:-1;background-color:inherit;width:100%;height:100%;left:0;bottom:-10%;-webkit-border-radius:%?10?%;border-radius:%?10?%;opacity:.2;-webkit-transform:scale(.9);transform:scale(.9)}.nav-li.cur[data-v-97c8e05c]{color:#fff;background:#5eb95e;-webkit-box-shadow:%?4?% %?4?% %?6?% rgba(94,185,94,.4);box-shadow:%?4?% %?4?% %?6?% rgba(94,185,94,.4)}.nav-title[data-v-97c8e05c]{font-size:%?32?%;font-weight:300}.nav-title[data-v-97c8e05c]::first-letter{font-size:%?40?%;margin-right:%?4?%}.nav-name[data-v-97c8e05c]{font-size:%?28?%;text-transform:Capitalize;margin-top:%?20?%;position:relative}.nav-name[data-v-97c8e05c]::before{content:"";position:absolute;display:block;width:%?40?%;height:%?6?%;background:#fff;bottom:0;right:0;opacity:.5}.nav-name[data-v-97c8e05c]::after{content:"";position:absolute;display:block;width:%?100?%;height:1px;background:#fff;bottom:0;right:%?40?%;opacity:.3}.nav-name[data-v-97c8e05c]::first-letter{font-weight:700;font-size:%?36?%;margin-right:1px}.nav-image[data-v-97c8e05c]{position:absolute;right:%?30?%;top:%?30?%;font-size:%?52?%;width:%?60?%;height:%?60?%;text-align:center;line-height:%?60?%}.text-light[data-v-97c8e05c]{font-weight:300}',""]),t.exports=e},d37d:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"bg-white"},[i("v-uni-scroll-view",{staticClass:"scrollPage",attrs:{"scroll-y":"true"}},[i("cu-custom",{attrs:{isCustom:t.isLogin,customIcon:t.customIcon},on:{parentEvent:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDeviceModal.apply(void 0,arguments)}}}),"cardSwiper"==t.show?i("v-uni-swiper",{staticClass:"card-swiper",attrs:{id:"cardSwiper","indicator-dots":t.indicatorDots,circular:t.circular,autoplay:t.autoplay,interval:t.interval,duration:t.duration,"indicator-active-color":t.indicatorActiveColor},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.cardSwiperChange.apply(void 0,arguments)}}},t._l(t.cardSwiperList,(function(e,a){return i("v-uni-swiper-item",{key:a,staticClass:"card-swiper-item"},[i("v-uni-view",{staticClass:"swiper-item"},["phoneSlideshow"==e.type?i("v-uni-image",{attrs:{src:e.url,mode:"aspectFill"}}):t._e()],1)],1)})),1):i("v-uni-view",{ref:"parent",staticClass:"padding-bottom",staticStyle:{"background-color":"#f8f8f8"},style:[{height:t.videoHeight+"px"}]},[i("v-uni-view",{ref:"video",staticClass:"video-js",staticStyle:{width:"100vw"},style:[{height:"calc("+t.videoHeight+"px - 30rpx)"}]})],1),0!=t.videoList.length?i("v-uni-view",{staticClass:"cu-bar bg-white",staticStyle:{"border-top-left-radius":"20upx","border-top-right-radius":"20upx"}},[i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-bold ztnCustom-color-black"},[t._v(t._s(t.i18n.home.intelligentAgriculture))])],1)],1):t._e(),0!=t.videoList.length?i("v-uni-view",{staticClass:"nav-list text-white"},t._l(t.videoList,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{"border-radius":"12rpx",width:"45%",height:"180rpx",margin:"20rpx 2.5%","background-size":"cover","background-position":"center",position:"relative"},style:[{backgroundImage:"url("+e.iconUrl+")"}],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tapVideo(e)}}},[i("v-uni-image",{staticStyle:{width:"65rpx",height:"65rpx",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.playUrl==e.url?t.pauseIcon:t.playIcon}})],1)})),1):t._e(),0!=t.cameraList.length?i("v-uni-view",{staticClass:"cu-bar bg-white",staticStyle:{"border-top-left-radius":"20upx","border-top-right-radius":"20upx"}},[i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-bold ztnCustom-color-black"},[t._v(t._s(t.i18n.camera.cameraDevice))])],1),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deviceCamera()}}},[i("v-uni-text",{staticClass:"cuIcon-right"})],1)],1):t._e(),0!=t.cameraList.length?i("v-uni-view",{staticClass:"nav-list "},t._l(t.cameraList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"text-grey",class:[e.picturePath?"":"cuIcon-pic"],staticStyle:{"border-radius":"12rpx",width:"45%",height:"180rpx",margin:"20rpx 2.5%","background-size":"cover","background-position":"center",position:"relative"},style:[{backgroundImage:"url("+e.picturePath+")"}],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tapCamera(e)}}},[i("v-uni-image",{staticStyle:{width:"65rpx",height:"65rpx",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.deviceId==e.deviceId?t.pauseIcon:t.playIcon}})],1)})),1):t._e(),0!=t.productTypeList.length?i("v-uni-view",{staticClass:"cu-bar",staticStyle:{"border-top-left-radius":"20rpx","border-top-right-radius":"20rpx"}},[i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"text-bold"},[t._v(t._s(t.i18n.home.productType))])],1)],1):t._e(),0!=t.productTypeList.length?i("v-uni-view",{staticClass:"nav-list",style:[{paddingBottom:t.tabbarHeight+"px"}]},t._l(t.productTypeList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"nav-li text-white",style:[{backgroundColor:""+e.color}],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.list(e)}}},[i("v-uni-view",{staticClass:"nav-title"},[t._v(t._s(e.num))]),i("v-uni-view",{staticClass:"nav-name"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"cu-avatar round  bg-white margin-right-sm nav-image",staticStyle:{"background-color":"rgba(0, 0, 0, 0)"},style:[{backgroundImage:"url("+e.iconUrl+")"}]})],1)})),1):t._e()],1),t.isShowBindDeviceModal?i("v-uni-view",{staticClass:"cu-modal bottom-modal",class:[t.isShowBindDeviceModal?"show":""],staticStyle:{"text-align":"start"}},[i("v-uni-view",{staticClass:"cu-dialog bg-white"},[i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action text-bold"},[t._v(t._s(t.i18n.bindDevice))]),i("v-uni-view",{staticClass:"action text-bold"},[i("v-uni-view",{staticClass:"cuIcon-close text-grey",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDeviceModal.apply(void 0,arguments)}}})],1)],1),i("v-uni-form",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDevice.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"cu-form-group",staticStyle:{"border-bottom":"1upx solid #eee"}},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.i18n.deviceCore))]),i("v-uni-input",{attrs:{type:"text",placeholder:t.i18n.inputDeviceCore,placeholderStyle:"color:#aaaaaa;letter-spacing:2px",name:"deviceCore"}})],1),i("v-uni-button",{staticClass:"cu-btn block line-grey margin lg",attrs:{"form-type":"submit"}},[t._v(t._s(t.i18n.confirm))])],1)],1)],1):t._e()],1)},o=[]},f07b:function(t,e,i){"use strict";var a=i("dbce");i("fb6a"),i("a9e3"),i("ac1f"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("9bc8")),o=a(i("0b74")),r=a(i("1b64")),s=a(i("5891")),c={data:function(){return{CustomBar:this.CustomBar,customIcon:"cuIcon-add",customColor:"",isShowBindDeviceModal:!1,isLoginOverdue:!1,show:"cardSwiper",indicatorDots:!0,circular:!0,autoplay:!0,interval:5e3,duration:500,indicatorActiveColor:"#70c8e2",cardSwiperList:[],videoHeight:"",videoList:[],playUrl:"",productTypeList:[],currentPage:1,pageSize:10,cameraList:[],playIcon:"../../static/images/cam/play.png",pauseIcon:"../../static/images/cam/pause.png",deviceId:"",pushTime:60}},name:"homeComponent",props:{isLogin:{type:Boolean},tabbarHeight:{type:[Number,String],default:""}},watch:{isLogin:{immediate:!0,handler:function(t,e){t&&this.initResource()},deep:!0}},computed:{themei18n:function(){return this.$themei18nOption()},i18n:function(){return this.$i18nMsg()}},mounted:function(){this.init()},methods:{init:function(){var t=uni.getStorageSync("companyId");this.getCardSwiperList(t),this.getVideoList(t),this.getCardSwiperHeight()},initResource:function(){this.getCameraList(),this.getProductTypeList()},getCardSwiperList:function(t){var e=this;s.getCompanyResource(this,"phoneSlideshow",t).then((function(t){if("200"==t.code){for(var i=t.data,a=[],n=0;n<i.length;n++){var o={},r=i[n],s=r.type,c=r.url;o.id=n,o.type=s,o.url=c,a.push(o)}e.cardSwiperList=a}}))},getCardSwiperHeight:function(){var t=this,e=uni.getStorageSync("videoHeight");e?this.videoHeight=e:uni.createSelectorQuery().in(this).select("#cardSwiper").boundingClientRect((function(e){t.videoHeight=e.height,uni.setStorageSync("videoHeight",e.height)})).exec()},cardSwiperChange:function(t){this.cardCur=t.detail.current},getVideoList:function(t){var e=this;s.getCompanyResource(this,"video",t).then((function(t){if("200"==t.code){for(var i=t.data,a=[],n=0;n<i.length;n++){var o={},r=i[n],s=r.iconUrl,c=r.url,u=r.title;o.iconUrl=s,o.url=c,o.title=u,a.push(o)}e.videoList=a}}))},tapVideo:function(t){var e=this;this.show="agricultureVideo",this.playUrl=t.url,this.$nextTick((function(){var i=document.createElement("video");i.id="video",i.autoplay=!0,i.controls=!0;var a=document.createElement("source");a.src=t.url,i.appendChild(a),e.$refs.video.$el.appendChild(i),videojs("video")}))},closeVideo:function(t){this.show="cardSwiper",this.playUrl="",this.stopCloud(),this.deviceId=""},getCameraList:function(){var t=this,e=uni.getStorageSync("userId"),i=this.currentPage,a=this.pageSize,n=[];o.getCameraDeviceList(this,e,i,a).then((function(e){if("200"==e.code){var a=e.data,o=a.data,r=a.total;if(r<1)return void(t.cameraList=[]);for(var s=0;s<o.length;s++){var c={},u=o[s],d=u.picturePath,l=u.deviceId,v=u.hid;c.picturePath=d&&"".concat(d),c.deviceId=l,c.hid=v,n.push(c)}1==i&&n.length>3?t.cameraList=n.slice(1,5):t.cameraList=n,t.currentPage=i+1}}))},tapCamera:function(t){var e=this;this.show="cameraVideo",this.playUrl="",this.stopCloud();var i=t.deviceId;this.deviceId=i;var a=this.pushTime;o.pushCloud(this,i,a).then((function(t){if("200"==t.code){var i=t.data.playUrl;if(null!=i){var a=t.data.mediaType;e.playUrl=i,e.videoType="m3u8"==a||"httpflv"==a?a:"rtmp"}else e.$uniUtilsApi.showToast(e.i18n.invalidAddress,"none",1e3,!1)}else{if("201"==t.code)switch(t.msg){case"serverCompany":e.$uniUtilsApi.showToast(e.i18n.camera.equipmentNotSupported,"none",1e3,!1);break;case"OFFLINE":e.$uniUtilsApi.showToast(e.i18n.camera.equipmentOffline,"none",1e3,!1);break;default:e.$uniUtilsApi.showToast(e.i18n.camera.pushFailure,"none",1e3,!1);break}else e.$uniUtilsApi.showToast(e.i18n.camera.pushFailure,"none",1e3,!1);setTimeout((function(){uni.navigateBack()}),1e3)}}))},stopCloud:function(){var t=this.deviceId;t&&o.stopCloud(this,t).then((function(t){t.code}))},deviceCamera:function(){uni.navigateTo({url:"/pages/deviceCamera/deviceCamera"})},getProductTypeList:function(){var t=this,e=uni.getStorageSync("userId");n.getProductTypeList(this,e).then((function(e){if("200"==e.code){var i=e.data,a=t.themei18n.standardColor,n=[];for(var o in a){if("grey"==o)break;n.push(a[o])}for(var r=0,s=n.length,c=0;c<i.length;c++)r<s?(i[c].color=n[r],r+=1):(i[c].color=n[0],r=1);t.productTypeList=i}}))},list:function(t){var e={pageCur:"list",productId:t.productId};this.$emit("list",e)},bindDeviceModal:function(){this.isShowBindDeviceModal=!this.isShowBindDeviceModal},bindDevice:function(t){var e=this,i=t.detail.value.deviceCore.replace(/\s/g,"");this.isShowBindDeviceModal=!1,r.getDeviceInfo(this,i).then((function(t){"200"==t.code?e.$uniUtilsApi.showToast(e.i18n.bindSuccess,"none",1e3,!1):e.$uniUtilsApi.showToast(e.i18n.bindFail,"none",1e3,!1)}))}}};e.default=c},f946:function(t,e,i){var a=i("a831");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1ec5b466",a,!0,{sourceMap:!1,shadowMode:!1})}}]);