(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-deviceCamera-deviceCamera"],{"0228":function(t,e,a){"use strict";a.r(e);var i=a("e5384"),n=a("85a8");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("89ad"),a("6ed7");var o,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"fb218a80",null,!1,i["a"],o);e["default"]=c.exports},"0b74":function(t,e,a){"use strict";function i(t,e,a){var i=t.$uniBaseRequest(t,"/camera/bind/list",{userId:e,deviceCore:a});return i}function n(t,e,a,i){var n=t.$uniBaseRequest(t,"/camera/device/pageGet",{userId:e,currentPage:a,pageSize:i});return n}function r(t,e,a,i){var n=t.$uniBaseRequest(t,"/camera/auth/pageGet",{userId:e,currentPage:a,pageSize:i});return n}function o(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,i=t.$uniBaseRequest(t,"/camera/device/pushCloud",{mediaType:"rtmp",deviceId:e,pushTime:a});return i}function s(t,e){var a=t.$uniBaseRequest(t,"/camera/device/stopCloud",{deviceId:e});return a}function c(t,e){var a=t.$uniBaseRequest(t,"/camera/device/keepPushCloud",{mediaType:"rtmp",deviceId:e});return a}function u(t,e,a){var i=t.$uniBaseRequest(t,"/camera/device/controlAction",{deviceId:e,action:a});return i}Object.defineProperty(e,"__esModule",{value:!0}),e.getCameraList=i,e.getCameraDeviceList=n,e.getCameraAuthList=r,e.pushCloud=o,e.stopCloud=s,e.keepPushCloud=c,e.sendActionCommand=u},"4a8c":function(t,e,a){"use strict";var i=a("4ea4"),n=a("dbce");a("99af"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(a("0b74")),o=i(a("b060")),s={mixins:[o.default],data:function(){return{CustomBar:this.CustomBar,downOption:{use:!0,auto:!1},upOption:{auto:!1,empty:{use:!0,fixed:!0,top:"20%"}},isToHome:!1,fromLoginBack:!1,isLoginOverdue:!1,currentPage:1,pageSize:10,cameraList:[],cameraAuthList:[],bottomBarHeight:"",isShowCameraAuth:!1}},computed:{i18n:function(){return this.$i18nMsg()},themei18n:function(){return this.$themei18nOption()}},onLoad:function(){var t=uni.getStorageSync("isLogin")||!1;t?this.init():uni.navigateTo({url:"/pages/login/login"})},onShow:function(){this.$uniUtilsApi.toHome(this);var t=this.fromLoginBack;t&&(this.init(),this.fromLoginBack=!1,this.isLoginOverdue=!1)},methods:{init:function(t){this.getCameraList(),this.getCameraAuthList()},downCallback:function(){this.currentPage=1,this.cameraList=[],this.mescroll.resetUpScroll()},getCameraList:function(){var t=this,e=uni.getStorageSync("userId"),a=this.currentPage,i=this.pageSize,n=[];r.getCameraDeviceList(this,e,a,i).then((function(e){if("200"==e.code){var i=e.data,r=i.data,o=i.total;if(o<1){var s=t.i18n.noData;return t.$uniUtilsApi.showToast(s,"none",1e3,!1),void setTimeout((function(){uni.navigateBack({delta:1})}),1e3)}for(var c=0;c<r.length;c++){var u=r[c],l=u.picturePath,d=u.deviceId,f=u.hid,h={picturePath:l&&"".concat(l),deviceId:d,hid:f};n.push(h)}t.mescroll.endByPage(r.length,o);var v=a-1;t.$set(t.cameraList,v,n),t.currentPage=a+1}}))},tapCamera:function(t){var e=t.deviceId;uni.navigateTo({url:"/pages/devicePlayer/devicePlayer?deviceId=".concat(e)})},getCameraAuthList:function(){var t=this,e=[],a=this.currentPage,i=this.pageSize,n=uni.getStorageSync("userId");r.getCameraAuthList(this,n,a,i).then((function(a){if("200"==a.code){for(var i=a.data.data,n=0;n<i.length;n++){var r=i[n],o=r.userName,s=r.serverCompany;e.push({userName:o,serverCompany:s})}t.cameraAuthList=e;var c=uni.getStorageSync("bottomBarHeight");c?t.bottomBarHeight=c:t.$nextTick((function(){setTimeout((function(){uni.createSelectorQuery().select("#cameraAuth").boundingClientRect((function(e){if(e){var a=e.height;t.bottomBarHeight=a,uni.setStorageSync("bottomBarHeight",a)}})).exec()}),0)}))}}))},openCameraAuth:function(){this.isShowCameraAuth=!this.isShowCameraAuth}},onShareAppMessage:function(t){var e=uni.getStorageSync("nickName"),a=uni.getStorageSync("shortCompanyName");return{title:"".concat(e).concat(this.i18n.moreOperate.share).concat(a),path:"/pages/deviceError/deviceError",success:function(t){}}}};e.default=s},"60b2":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-fb218a80]{background-color:#fff}body.?%PAGE?%[data-v-fb218a80]{background-color:#fff}",""]),t.exports=e},"6ed7":function(t,e,a){"use strict";var i=a("8184"),n=a.n(i);n.a},8184:function(t,e,a){var i=a("fd38");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("6f3dfafb",i,!0,{sourceMap:!1,shadowMode:!1})},"85a8":function(t,e,a){"use strict";a.r(e);var i=a("4a8c"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},"89ad":function(t,e,a){"use strict";var i=a("a963"),n=a.n(i);n.a},a963:function(t,e,a){var i=a("60b2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("46f7baba",i,!0,{sourceMap:!1,shadowMode:!1})},b060:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{mescroll:null}},onPullDownRefresh:function(){this.mescroll&&this.mescroll.onPullDownRefresh()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},methods:{mescrollInit:function(t){this.mescroll=t,this.mescrollInitByRef()},mescrollInitByRef:function(){if(!this.mescroll||!this.mescroll.resetUpScroll){var t=this.$refs.mescrollRef;t&&(this.mescroll=t.mescroll)}},downCallback:function(){var t=this;this.mescroll.optUp.use?this.mescroll.resetUpScroll():setTimeout((function(){t.mescroll.endSuccess()}),500)},upCallback:function(){var t=this;setTimeout((function(){t.mescroll.endErr()}),500)}},mounted:function(){this.mescrollInitByRef()}},n=i;e.default=n},e5384:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[t.isToHome?a("cu-custom",{attrs:{isHome:!0}},[a("template",{attrs:{slot:"homeText"},slot:"homeText"},[t._v(t._s(t.i18n.camera.cameraManager))])],2):a("cu-custom",{attrs:{isBack:!0}},[a("template",{attrs:{slot:"backText"},slot:"backText"},[t._v(t._s(t.i18n.camera.cameraManager))])],2),a("mescroll-body",{ref:"mescrollRef",attrs:{down:t.downOption,up:t.upOption},on:{init:function(e){arguments[0]=e=t.$handleEvent(e),t.mescrollInit.apply(void 0,arguments)},down:function(e){arguments[0]=e=t.$handleEvent(e),t.downCallback.apply(void 0,arguments)},up:function(e){arguments[0]=e=t.$handleEvent(e),t.getCameraList.apply(void 0,arguments)}}},[0!=t.cameraList.length?a("v-uni-view",{staticClass:"cu-bar",staticStyle:{"border-top-left-radius":"20rpx","border-top-right-radius":"20rpx"}},[a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"text-bold"},[t._v(t._s(t.i18n.camera.cameraDevice))])],1)],1):t._e(),t._l(t.cameraList,(function(e,i){return 0!=t.cameraList.length?a("v-uni-view",{key:i},t._l(e,(function(e,i){return a("v-uni-view",{key:i,staticClass:"flex align-center bg-white",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tapCamera(e)}}},[a("v-uni-view",{staticClass:"margin-left margin-right-lg "},[a("v-uni-image",{staticClass:"text-gray",class:[e.picturePath?"":"cuIcon-pic"],staticStyle:{width:"96rpx",height:"96rpx","font-size":"96rpx"},attrs:{src:e.picturePath}})],1),a("v-uni-view",{staticClass:"flex-sub padding-tb solid-bottom"},[a("v-uni-view",{staticClass:"text-df",staticStyle:{height:"96rpx","line-height":"96rpx"}},[t._v(t._s(e.hid))])],1)],1)})),1):t._e()}))],2),a("v-uni-view",{style:[{height:t.bottomBarHeight+"px"}]}),0!=t.cameraAuthList.length?a("v-uni-view",{staticClass:"bg-white text-center",staticStyle:{position:"fixed",width:"100%",bottom:"0","z-index":"1024","box-shadow":"0 -1rpx 6rpx rgba(0, 0, 0, 0.1)"},attrs:{id:"cameraAuth"}},[a("v-uni-view",{staticClass:"padding text-gray text-lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCameraAuth.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.camera.cameraAuth))])],1):t._e(),a("v-uni-view",{staticClass:"cu-modal bottom-modal",class:[t.isShowCameraAuth?"show":""],staticStyle:{"text-align":"start"}},[a("v-uni-view",{staticClass:"cu-dialog bg-white",staticStyle:{"border-top-left-radius":"20rpx","border-top-right-radius":"20rpx"}},[a("v-uni-view",{staticClass:"cu-bar bg-white"},[a("v-uni-view",{staticClass:"action text-bold"},[t._v(t._s(t.i18n.camera.cameraAuth))])],1),a("v-uni-view",{staticClass:"cu-bar bg-white solid-bottom flex",staticStyle:{"border-top-left-radius":"20rpx","border-top-right-radius":"20rpx"}},[a("v-uni-view",{staticClass:"flex-sub text-center text-grey text-bold",staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(t.i18n.camera.name))])],1),t._l(t.cameraAuthList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"cu-bar bg-white solid-bottom flex",staticStyle:{"border-top-left-radius":"20rpx","border-top-right-radius":"20rpx"}},[a("v-uni-view",{staticClass:"flex-sub text-center",staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.userName))])],1)})),a("v-uni-button",{staticClass:"cu-btn block line-grey margin lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCameraAuth.apply(void 0,arguments)}}},[t._v(t._s(t.i18n.close))])],2)],1)],1)},r=[]},fd38:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-fb218a80]{background-color:#fff}body.?%PAGE?%[data-v-fb218a80]{background-color:#fff}",""]),t.exports=e}}]);